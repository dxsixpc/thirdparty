(self.webpackChunk_zpcscc_thirdparty=self.webpackChunk_zpcscc_thirdparty||[]).push([[904],{62046:function(L,w,v){"use strict";var k;v.r(w),v.d(w,{demos:function(){return ee}});var x=v(90228),D=v.n(x),z=v(87999),J=v.n(z),R=v(75271),V=v(29425),K=v(35157),Q=v(57739),Z=v(81031),q=v(60199),ee={"docs-crypto-crypto-aes-demo-cryptoaes":{component:R.memo(R.lazy(function(){return v.e(433).then(v.bind(v,98794))})),asset:{type:"BLOCK",id:"docs-crypto-crypto-aes-demo-cryptoaes",refAtomIds:[],dependencies:{"index.tsx":{type:"FILE",value:v(62683).Z},"@ant-design/icons":{type:"NPM",value:"5.4.0"},"@zpcscc/thirdparty":{type:"NPM",value:"0.2.1"},"@zpcscc/utils":{type:"NPM",value:"8.0.1"},antd:{type:"NPM",value:"5.20.6"},react:{type:"NPM",value:"18.3.1"}},entry:"index.tsx"},context:{"@ant-design/icons":K,"@zpcscc/thirdparty":Q,"@zpcscc/utils":Z,antd:q,react:k||(k=v.t(R,2))},renderOpts:{compile:function(){var te=J()(D()().mark(function re(){var Y,M=arguments;return D()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,v.e(640).then(v.bind(v,25640));case 2:return W.abrupt("return",(Y=W.sent).default.apply(Y,M));case 3:case"end":return W.stop()}},re)}));function $(){return te.apply(this,arguments)}return $}()}}}},33848:function(L,w,v){"use strict";var k;v.r(w),v.d(w,{demos:function(){return ee}});var x=v(90228),D=v.n(x),z=v(87999),J=v.n(z),R=v(75271),V=v(2597),K=v(35157),Q=v(57739),Z=v(81031),q=v(60199),ee={"docs-crypto-crypto-base-64-demo-cryptobase64":{component:R.memo(R.lazy(function(){return v.e(433).then(v.bind(v,5982))})),asset:{type:"BLOCK",id:"docs-crypto-crypto-base-64-demo-cryptobase64",refAtomIds:[],dependencies:{"index.tsx":{type:"FILE",value:v(91023).Z},"@ant-design/icons":{type:"NPM",value:"5.4.0"},"@zpcscc/thirdparty":{type:"NPM",value:"0.2.1"},"@zpcscc/utils":{type:"NPM",value:"8.0.1"},antd:{type:"NPM",value:"5.20.6"},react:{type:"NPM",value:"18.3.1"}},entry:"index.tsx"},context:{"@ant-design/icons":K,"@zpcscc/thirdparty":Q,"@zpcscc/utils":Z,antd:q,react:k||(k=v.t(R,2))},renderOpts:{compile:function(){var te=J()(D()().mark(function re(){var Y,M=arguments;return D()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,v.e(640).then(v.bind(v,25640));case 2:return W.abrupt("return",(Y=W.sent).default.apply(Y,M));case 3:case"end":return W.stop()}},re)}));function $(){return te.apply(this,arguments)}return $}()}}}},36116:function(L,w,v){"use strict";v.r(w),v.d(w,{demos:function(){return D}});var k=v(75271),x=v(51461),D={}},9:function(L,w,v){"use strict";v.r(w),v.d(w,{demos:function(){return D}});var k=v(75271),x=v(52626),D={}},40150:function(L,w,v){"use strict";var k;v.r(w),v.d(w,{demos:function(){return Z}});var x=v(90228),D=v.n(x),z=v(87999),J=v.n(z),R=v(75271),V=v(50823),K=v(57739),Q=v(60199),Z={"docs-screenshot-html-to-image-demo-html-to-image":{component:R.memo(R.lazy(function(){return v.e(433).then(v.bind(v,12669))})),asset:{type:"BLOCK",id:"docs-screenshot-html-to-image-demo-html-to-image",refAtomIds:[],dependencies:{"index.tsx":{type:"FILE",value:v(44676).Z},"@zpcscc/thirdparty":{type:"NPM",value:"0.2.1"},antd:{type:"NPM",value:"5.20.6"},react:{type:"NPM",value:"18.3.1"}},entry:"index.tsx"},context:{"@zpcscc/thirdparty":K,antd:Q,react:k||(k=v.t(R,2))},renderOpts:{compile:function(){var q=J()(D()().mark(function te(){var $,re=arguments;return D()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,v.e(640).then(v.bind(v,25640));case 2:return M.abrupt("return",($=M.sent).default.apply($,re));case 3:case"end":return M.stop()}},te)}));function ee(){return q.apply(this,arguments)}return ee}()}}}},18681:function(L,w,v){"use strict";var k;v.r(w),v.d(w,{demos:function(){return Z}});var x=v(90228),D=v.n(x),z=v(87999),J=v.n(z),R=v(75271),V=v(95732),K=v(57739),Q=v(60199),Z={"docs-screenshot-screenshot-demo-screenshot":{component:R.memo(R.lazy(function(){return v.e(433).then(v.bind(v,46525))})),asset:{type:"BLOCK",id:"docs-screenshot-screenshot-demo-screenshot",refAtomIds:[],dependencies:{"index.tsx":{type:"FILE",value:v(7128).Z},"@zpcscc/thirdparty":{type:"NPM",value:"0.2.1"},antd:{type:"NPM",value:"5.20.6"},react:{type:"NPM",value:"18.3.1"}},entry:"index.tsx"},context:{"@zpcscc/thirdparty":K,antd:Q,react:k||(k=v.t(R,2))},renderOpts:{compile:function(){var q=J()(D()().mark(function te(){var $,re=arguments;return D()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,v.e(640).then(v.bind(v,25640));case 2:return M.abrupt("return",($=M.sent).default.apply($,re));case 3:case"end":return M.stop()}},te)}));function ee(){return q.apply(this,arguments)}return ee}()}}}},57739:function(L,w,v){"use strict";v.r(w),v.d(w,{ScreenShot:function(){return go},cryptoAES:function(){return $},cryptoBase64:function(){return lr},getErrorMsg:function(){return Gt},request:function(){return Ln},toBlob:function(){return xn},toCanvas:function(){return ve},toJpeg:function(){return kn},toPixelData:function(){return Bn},toPng:function(){return On},toSvg:function(){return Cn},toSvgNode:function(){return je}});var k=v(26068),x=v.n(k),D=v(81031),z=v(25778),J=z.enc.Base64,R=z.enc.Hex,V=z.enc.Utf8,K=function(t){return"".concat(t).slice(0,16).padEnd(16)},Q={iv:"0000000000000000",mode:"CBC",padding:"Pkcs7"},Z=function(t){var e=x()(x()({},Q),t);return{iv:V.parse(K(e.iv)),mode:z.mode[e.mode],padding:z.pad[e.padding]}},q=function(t,e,r){var n=(0,D.toString)(t),a=V.parse(n),o=V.parse(K(e)),l=Z(r),i=z.AES.encrypt(a,o,l);return i.ciphertext.toString().toUpperCase()},ee=function(t,e,r){var n=J.stringify(R.parse(t)),a=V.parse(K(e)),o=Z(r),l=z.AES.decrypt(n,a,o),i=l.toString(V);return(0,D.toData)(i)},te={encrypt:q,decrypt:ee},$=te,re=v(33490),Y=v.n(re),M=v(26551),Ee=v.n(M),W=function(t){var e=(0,D.toString)(t);return Y().stringify(Ee().parse(e))},ar=function(t){var e="";try{e=Y().parse(t).toString(Ee())}catch(r){e="\u683C\u5F0F\u9519\u8BEF"}return(0,D.toData)(e)},or={encrypt:W,decrypt:ar},lr=or,ir=v(90228),f=v.n(ir),sr=v(87999),E=v.n(sr),ur=function(){var t=navigator.userAgent,e=/Macintosh/.test(t),r=/Safari/.test(t)&&!/Chrome|CriOS|Edg|Edge|Firefox/.test(t);return e&&r},It=ur,cr=function(t,e){if(/^[a-z]+:\/\//i.test(t))return t;if(/^\/\//.test(t))return window.location.protocol+t;if(/^[a-z]+:/i.test(t))return t;var r=document.implementation.createHTMLDocument(),n=r.createElement("base"),a=r.createElement("a");return r.head.append(n),r.body.append(a),e&&(n.href=e),a.href=t,a.href},dr=function(){var u=0,t=function(){return"0000".concat(Math.trunc(Math.random()*Math.pow(36,4)).toString(36)).slice(-4)};return function(){return u+=1,"u".concat(t()).concat(u)}}(),fo=function(t){return function(e){return new Promise(function(r){setTimeout(function(){return r(e)},t)})}},ne=function(t){for(var e=[],r=0,n=t.length;r<n;r++)e.push(t[r]);return e},be=function(t,e){var r=t.ownerDocument.defaultView||window,n=r.getComputedStyle(t).getPropertyValue(e);return n?Number.parseFloat(n.replace("px","")):0},vr=function(t){var e=be(t,"border-left-width"),r=be(t,"border-right-width");return t.clientWidth+e+r},hr=function(t){var e=be(t,"border-top-width"),r=be(t,"border-bottom-width");return t.clientHeight+e+r},Le=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.width||vr(t),n=e.height||hr(t);return{width:r,height:n}},pr=function(){var t,e;try{e=process}catch(n){}var r=e&&e.env?e.env.devicePixelRatio:null;return r&&(t=Number.parseInt(r,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1},gr=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t.toBlob?new Promise(function(r){var n,a;t.toBlob(r,(n=e.type)!==null&&n!==void 0?n:"image/png",(a=e.quality)!==null&&a!==void 0?a:1)}):new Promise(function(r){for(var n,a,o,l=window.atob(t.toDataURL((n=e.type)!==null&&n!==void 0?n:void 0,(a=e.quality)!==null&&a!==void 0?a:void 0).split(",")[1]),i=l.length,c=new Uint8Array(i),s=0;s<i;s+=1){var d;c[s]=(d=l.codePointAt(s))!==null&&d!==void 0?d:0}r(new Blob([c],{type:(o=e.type)!==null&&o!==void 0?o:"image/png"}))})},_e=function(t){return new Promise(function(e,r){var n=new Image;n.addEventListener("load",function(){return e(n)}),n.addEventListener("error",r),n.crossOrigin="anonymous",n.decoding="sync",n.loading="eager",n.src=t})},Et=function(){var u=E()(f()().mark(function t(e){var r;return f()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Promise.resolve().then(function(){return new XMLSerializer().serializeToString(e)}).then(mr).then(encodeURIComponent).then(function(o){return"data:image/svg+xml;charset=utf-8,".concat(o)});case 2:return r=a.sent,a.abrupt("return",r);case 4:case"end":return a.stop()}},t)}));return function(e){return u.apply(this,arguments)}}(),fr=function(t,e,r){var n="http://www.w3.org/2000/svg",a=document.createElementNS(n,"svg"),o=document.createElementNS(n,"foreignObject");return a.setAttribute("width","".concat(e)),a.setAttribute("height","".concat(r)),a.setAttribute("viewBox","0 0 ".concat(e," ").concat(r)),o.setAttribute("width","100%"),o.setAttribute("height","100%"),o.setAttribute("x","0"),o.setAttribute("y","0"),o.setAttribute("externalResourcesRequired","true"),a.append(o),o.append(t),a},ze=function(t){var e=/url\((["']?)([^"']+?)\1\)/g;return t.search(e)!==-1},mr=function(t){return new Promise(function(e){if(It()){for(var r=t!=null?t:"",n=/data:image\/(png|jpeg);base64,([\d+/=A-Za-z]+)/g,a,o=[];(a=n.exec(r))!==null;)if(a){var l=a[1],i=a[2];o.push(Sr(i,l,a).then(function(c){var s=c.webpDataUrl,d=c.matchArr;r=r.replace(d==null?void 0:d[0],s)}))}Promise.all(o).then(function(){e(r)})}else e(t)})},Sr=function(t,e,r){return new Promise(function(n,a){var o=new Image;o.src="data:image/".concat(e,";base64,").concat(t),o.addEventListener("load",function(){var l=document.createElement("canvas");l.width=o.width,l.height=o.height;var i=l.getContext("2d");i==null||i.drawImage(o,0,0),l.toBlob(function(c){if(c){var s=new FileReader;s.onloadend=function(){n({webpDataUrl:s.result,matchArr:r})},s.addEventListener("error",a),s.readAsDataURL(c)}},"image/webp",.75)}),o.addEventListener("error",a)})},yr=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16384;(t.width>e||t.height>e)&&(t.width>e&&t.height>e?t.width>t.height?(t.height*=e/t.width,t.width=e):(t.width*=e/t.height,t.height=e):t.width>e?(t.height*=e/t.width,t.width=e):(t.width*=e/t.height,t.height=e))},Cr=function(t,e){var r=t.createElement("canvas"),n=r.getContext("2d"),a=e.pixelRatio||pr(),o=e.canvasWidth||e.width||100,l=e.canvasHeight||e.height||100;return r.width=o*a,r.height=l*a,e.skipAutoScale||yr(r,e.maximumCanvasSize),r.style.width="".concat(o),r.style.height="".concat(l),e.backgroundColor&&(n.fillStyle=e.backgroundColor,n.fillRect(0,0,r.width,r.height)),{canvas:r,context2d:n}},wr=Cr,Pr=v(31759),We=v.n(Pr),xe=function(t){return t.nodeType===1},Ir=function(t){return t.tagName==="VIDEO"},Er=function(t){return We()(t.className)==="object"},Ue=function(t){return t.tagName==="IMG"},br=function(t){return xe(t)&&t.style!==void 0&&!Er(t)},xr=function(t){return t.tagName==="image"},G=function u(t,e){if(t instanceof e)return!0;var r=Object.getPrototypeOf(t);return r===null?!1:r.constructor.name&&e.name&&r.constructor.name===e.name||u(r,e)},Tr=function(t){var e;return(e=t&&xe(t)?t==null?void 0:t.ownerDocument:t)!==null&&e!==void 0?e:window.document},kr=Tr,Dr=function(t,e){var r=kr(e).createElement("img");return r.decoding="sync",r.loading="eager",r.src=t,r},bt=Dr,Br=function(t,e){var r=t.style;e.backgroundColor&&(r.backgroundColor=e.backgroundColor),e.width&&(r.width="".concat(e.width,"px")),e.height&&(r.height="".concat(e.height,"px"));var n=e.style;return n&&Object.keys(n).forEach(function(a){r[a]=n[a]}),t},Mr=v(335),Fe=v.n(Mr),Or=v(15558),xt=v.n(Or),Rr=function(t){var e=t.getPropertyValue("content");return"".concat(t.cssText," content: '").concat(e.replaceAll(/'|"/g,""),"';")},Ar=function(t){return ne(t).map(function(e){var r=t.getPropertyValue(e),n=t.getPropertyPriority(e);return"".concat(e,": ").concat(r).concat(n?" !important":"",";")}).join(" ")},Lr=function(t,e,r){var n=".".concat(t,":").concat(e),a=r.cssText?Rr(r):Ar(r);return document.createTextNode("".concat(n,"{").concat(a,"}"))},Tt=function(t,e,r){var n=window.getComputedStyle(t,r),a=n.getPropertyValue("content");if(!(a===""||a==="none")){var o=dr();try{e.className="".concat(e.className," ").concat(o)}catch(i){return}var l=document.createElement("style");l.append(Lr(o,r,n)),e.append(l)}},_r=function(t,e){Tt(t,e,":before"),Tt(t,e,":after")},zr=function(t){return t.split(/,/)[1]},He=function(t){return t.search(/^(data:)/)!==-1},kt=function(t,e){return"data:".concat(e,";base64,").concat(t)},Dt=function(){var u=E()(f()().mark(function t(e,r,n){var a,o;return f()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,fetch(e,r);case 2:if(a=i.sent,a.status!==404){i.next=5;break}throw new Error('Resource "'.concat(a.url,'" not found'));case 5:return i.next=7,a.blob();case 7:return o=i.sent,i.abrupt("return",new Promise(function(c,s){var d=new FileReader;d.addEventListener("error",s),d.onloadend=function(){try{c(n({res:a,result:d.result}))}catch(h){s(h)}},d.readAsDataURL(o)}));case 9:case"end":return i.stop()}},t)}));return function(e,r,n){return u.apply(this,arguments)}}(),Ge={},Wr=function(t,e,r){var n=t.replace(/\?.*/,"");return r&&(n=t),/ttf|otf|eot|woff2?/i.test(n)&&(n=n.replace(/.*\//,"")),e?"[".concat(e,"]").concat(n):n},Ne=function(){var u=E()(f()().mark(function t(e,r,n){var a,o,l,i;return f()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(a=Wr(e,r,n.includeQueryParams),Ge[a]==null){s.next=3;break}return s.abrupt("return",Ge[a]);case 3:return n.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+Date.now()),s.prev=4,s.next=7,Dt(e,n.fetchRequestInit,function(d){var h=d.res,g=d.result;return r||(r=h.headers.get("Content-Type")||""),zr(g)});case 7:l=s.sent,o=kt(l,r),s.next=17;break;case 11:s.prev=11,s.t0=s.catch(4),o=n.imagePlaceholder||"",i="Failed to fetch resource: ".concat(e),s.t0&&(i=typeof s.t0=="string"?s.t0:s.t0.message),i&&console.warn(i);case 17:return Ge[a]=o,s.abrupt("return",o);case 19:case"end":return s.stop()}},t,null,[[4,11]])}));return function(e,r,n){return u.apply(this,arguments)}}(),Bt="application/font-woff",Mt="image/jpeg",Ur={woff:Bt,woff2:Bt,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Mt,jpeg:Mt,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"},Fr=function(t){var e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""},Ke=function(t){var e=Fr(t).toLowerCase();return Ur[e]||""},Hr=function(){var u=E()(f()().mark(function t(e){var r;return f()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(r=e.toDataURL(),r!=="data:,"){a.next=3;break}return a.abrupt("return",e.cloneNode(!1));case 3:return a.abrupt("return",_e(r));case 4:case"end":return a.stop()}},t)}));return function(e){return u.apply(this,arguments)}}(),Gr=function(){var u=E()(f()().mark(function t(e,r){var n,a,o,l,i,c;return f()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!e.currentSrc){d.next=8;break}return n=document.createElement("canvas"),a=n.getContext("2d"),n.width=e.clientWidth,n.height=e.clientHeight,a==null||a.drawImage(e,0,0,n.width,n.height),o=n.toDataURL(),d.abrupt("return",_e(o));case 8:return l=e.poster,i=Ke(l),d.next=12,Ne(l,i,r);case 12:return c=d.sent,d.abrupt("return",_e(c));case 14:case"end":return d.stop()}},t)}));return function(e,r){return u.apply(this,arguments)}}(),Nr=function(){var u=E()(f()().mark(function t(e){var r;return f()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!(e!=null&&(r=e.contentDocument)!==null&&r!==void 0&&r.body)){a.next=5;break}return a.next=4,Te(e.contentDocument.body,{},!0);case 4:return a.abrupt("return",a.sent);case 5:a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log("error:",a.t0);case 10:return a.abrupt("return",e.cloneNode(!1));case 11:case"end":return a.stop()}},t,null,[[0,7]])}));return function(e){return u.apply(this,arguments)}}(),Kr=function(){var u=E()(f()().mark(function t(e,r){return f()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!G(e,HTMLCanvasElement)){a.next=2;break}return a.abrupt("return",Hr(e));case 2:if(!G(e,HTMLVideoElement)){a.next=4;break}return a.abrupt("return",Gr(e,r));case 4:if(!G(e,HTMLIFrameElement)){a.next=6;break}return a.abrupt("return",Nr(e));case 6:return a.abrupt("return",e.cloneNode(!1));case 7:case"end":return a.stop()}},t)}));return function(e,r){return u.apply(this,arguments)}}(),$r=function(t){return t.tagName!=null&&t.tagName.toUpperCase()==="SLOT"},jr=function(){var u=E()(f()().mark(function t(e,r,n){var a,o,l;return f()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(o=[],$r(e)&&e.assignedNodes?o=ne(e.assignedNodes()):G(e,HTMLIFrameElement)&&(a=e.contentDocument)!==null&&a!==void 0&&a.body?o=ne(e.contentDocument.body.childNodes):o=ne(((l=e.shadowRoot)!==null&&l!==void 0?l:e).childNodes),!(o.length===0||G(e,HTMLVideoElement))){c.next=4;break}return c.abrupt("return",r);case 4:return c.next=6,o.reduce(function(s,d){return s.then(function(){return Te(d,n)}).then(function(h){h&&r.append(h)})},Promise.resolve());case 6:return c.abrupt("return",r);case 7:case"end":return c.stop()}},t)}));return function(e,r,n){return u.apply(this,arguments)}}(),Xr=function(t,e){var r=e.style;if(r){var n=window.getComputedStyle(t);n.cssText?(r.cssText=n.cssText,r.transformOrigin=n.transformOrigin):ne(n).forEach(function(a){var o=n.getPropertyValue(a);if(a==="font-size"&&o.endsWith("px")){var l=Math.floor(Number.parseFloat(o.slice(0,Math.max(0,o.length-2))))-.1;o="".concat(l,"px")}G(t,HTMLIFrameElement)&&a==="display"&&o==="inline"&&(o="block"),a==="d"&&e.getAttribute("d")&&(o="path(".concat(e.getAttribute("d"),")")),r.setProperty(a,o,n.getPropertyPriority(a))})}},Zr=function(t,e){G(t,HTMLTextAreaElement)&&(e.innerHTML=t.value),G(t,HTMLInputElement)&&e.setAttribute("value",t.value)},Yr=function(t,e){if(G(t,HTMLSelectElement)){var r=e,n=xt()(r.children).find(function(a){return t.value===a.getAttribute("value")});n&&n.setAttribute("selected","")}},Jr=function(t,e){if(!(t.scrollTop===0&&t.scrollLeft===0))for(var r=0;r<e.children.length;r+=1){var n=e.children[r];if(!("style"in n))return;var a=n,o=a.style.transform,l=new DOMMatrix(o),i=l.a,c=l.b,s=l.c,d=l.d;l.a=1,l.b=0,l.c=0,l.d=1,l.translateSelf(-t.scrollLeft,-t.scrollTop),l.a=i,l.b=c,l.c=s,l.d=d,a.style.transform=l.toString()}},Vr=function(t,e){return G(e,Element)&&(Xr(t,e),_r(t,e),Zr(t,e),Yr(t,e),Jr(t,e)),e},Qr=function(){var u=E()(f()().mark(function t(e,r){var n,a,o,l,i,c,s,d,h,g,p,y,C,m,P;return f()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(n=e.querySelectorAll?e.querySelectorAll("use"):[],n.length!==0){I.next=3;break}return I.abrupt("return",e);case 3:a={},o=Fe()(n),I.prev=5,o.s();case 7:if((l=o.n()).done){I.next=19;break}if(i=l.value,c=i.getAttribute("xlink:href"),!c){I.next=17;break}if(s=e.querySelector(c),d=document.querySelector(c),!(!s&&d&&!a[c])){I.next=17;break}return I.next=16,Te(d,r,!0);case 16:a[c]=I.sent;case 17:I.next=7;break;case 19:I.next=24;break;case 21:I.prev=21,I.t0=I.catch(5),o.e(I.t0);case 24:return I.prev=24,o.f(),I.finish(24);case 27:if(h=Object.values(a),h.length>0){g="http://www.w3.org/1999/xhtml",p=document.createElementNS(g,"svg"),p.setAttribute("xmlns",g),p.style.position="absolute",p.style.width="0",p.style.height="0",p.style.overflow="hidden",p.style.display="none",y=document.createElementNS(g,"defs"),p.append(y),C=Fe()(h);try{for(C.s();!(m=C.n()).done;)P=m.value,y.append(P)}catch(T){C.e(T)}finally{C.f()}e.append(p)}return I.abrupt("return",e);case 30:case"end":return I.stop()}},t,null,[[5,21,24,27]])}));return function(e,r){return u.apply(this,arguments)}}(),Te=function(){var u=E()(f()().mark(function t(e,r,n){return f()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!(!n&&r.filter&&!r.filter(e)||!e)){o.next=2;break}return o.abrupt("return",null);case 2:return o.abrupt("return",Promise.resolve(e).then(function(l){return Kr(l,r)}).then(function(l){return jr(e,l,r)}).then(function(l){return Vr(e,l)}).then(function(l){return Qr(l,r)}));case 3:case"end":return o.stop()}},t)}));return function(e,r,n){return u.apply(this,arguments)}}(),qr=v(48305),en=v.n(qr),tn=v(53649),ke=v.n(tn),Ot,rn=/url\((["']?)([^"']+?)\1\)/g,nn=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,an=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g,on=function(t){var e=t.replaceAll(/([$()*+./?[\\\]^{|}])/g,String.raw(Ot||(Ot=ke()(["$1"],["\\$1"]))));return new RegExp(`(url\\(['"]?)(`.concat(e,`)(['"]?\\))`),"g")},ln=function(t){var e=[];return t.replaceAll(rn,function(r,n,a){return e.push(a),r}),e.filter(function(r){return!He(r)})},sn=function(){var u=E()(f()().mark(function t(e,r,n,a,o){var l,i,c,s;return f()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(h.prev=0,l=n?cr(r,n):r,i=Ke(r),!o){h.next=10;break}return h.next=6,o(l);case 6:s=h.sent,c=kt(s,i),h.next=13;break;case 10:return h.next=12,Ne(l,i,a);case 12:c=h.sent;case 13:return h.abrupt("return",e.replace(on(r),"$1".concat(c,"$3")));case 16:h.prev=16,h.t0=h.catch(0),console.log("error:",h.t0);case 19:return h.abrupt("return",e);case 20:case"end":return h.stop()}},t,null,[[0,16]])}));return function(e,r,n,a,o){return u.apply(this,arguments)}}(),un=function(t,e){var r=e.preferredFontFormat;return r?t.replaceAll(an,function(n){for(;;){var a=nn.exec(n)||[],o=en()(a,3),l=o[0],i=o[2];if(!i)return"";if(i===r)return"src: ".concat(l,";")}}):t},Rt=function(){var u=E()(f()().mark(function t(e,r,n){var a,o;return f()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(ze(e)){i.next=2;break}return i.abrupt("return",e);case 2:return a=un(e,n),o=ln(a),i.abrupt("return",o.reduce(function(c,s){return c.then(function(d){return sn(d,s,r,n)})},Promise.resolve(a)));case 5:case"end":return i.stop()}},t)}));return function(e,r,n){return u.apply(this,arguments)}}(),cn=function(){It()&&(window.drawImageCount=(window.drawImageCount||0)+1)},$e=cn,De=function(){var u=E()(f()().mark(function t(e,r,n){var a,o,l;return f()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(o=(a=r.style)===null||a===void 0?void 0:a.getPropertyValue(e),!o){c.next=8;break}return ze(o)&&$e(),c.next=5,Rt(o,null,n);case 5:return l=c.sent,r.style.setProperty(e,l,r.style.getPropertyPriority(e)),c.abrupt("return",!0);case 8:return c.abrupt("return",!1);case 9:case"end":return c.stop()}},t)}));return function(e,r,n){return u.apply(this,arguments)}}(),dn=function(){var u=E()(f()().mark(function t(e,r){return f()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,De("background",e,r);case 2:if(a.sent){a.next=5;break}return a.next=5,De("background-image",e,r);case 5:return a.next=7,De("mask",e,r);case 7:if(a.sent){a.next=10;break}return a.next=10,De("mask-image",e,r);case 10:case"end":return a.stop()}},t)}));return function(e,r){return u.apply(this,arguments)}}(),vn=function(){var u=E()(f()().mark(function t(e,r){var n,a,o;return f()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(n=G(e,HTMLImageElement),!(!(n&&!He(e.src))&&!(G(e,SVGImageElement)&&!He(e.href.baseVal)))){i.next=3;break}return i.abrupt("return");case 3:return a=n?e.src:e.href.baseVal,i.next=6,Ne(a,Ke(a),r);case 6:return o=i.sent,i.next=9,new Promise(function(c,s){e.addEventListener("load",c),e.addEventListener("error",s);var d=e;d.decode&&(d.decode=c),d.loading==="lazy"&&(d.loading="eager"),n?(e.srcset="",e.src=o):e.href.baseVal=o});case 9:case"end":return i.stop()}},t)}));return function(e,r){return u.apply(this,arguments)}}(),hn=function(){var u=E()(f()().mark(function t(e,r){var n,a;return f()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return n=ne(e.childNodes),a=n.map(function(i){return At(i,r)}),l.next=4,Promise.all(a).then(function(){return e});case 4:case"end":return l.stop()}},t)}));return function(e,r){return u.apply(this,arguments)}}(),At=function(){var u=E()(f()().mark(function t(e,r){var n;return f()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!G(e,Element)){o.next=7;break}return o.next=3,dn(e,r);case 3:return o.next=5,vn(e,r);case 5:return o.next=7,hn(e,r);case 7:br(e)&&(n=["background-image","border-image-source","-webkit-border-image","-webkit-mask-image","list-style-image"],n.forEach(function(l){var i=e.style.getPropertyValue(l);if(!i||i==="none")return null;$e()})),xe(e)&&Ue(e)&&$e();case 9:case"end":return o.stop()}},t)}));return function(e,r){return u.apply(this,arguments)}}(),Lt,_t,zt,Wt={},Ut=function(){var u=E()(f()().mark(function t(e){var r,n,a;return f()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(r=Wt[e],r==null){l.next=3;break}return l.abrupt("return",r);case 3:return l.next=5,fetch(e);case 5:return n=l.sent,l.next=8,n.text();case 8:return a=l.sent,r={url:e,cssText:a},Wt[e]=r,l.abrupt("return",r);case 12:case"end":return l.stop()}},t)}));return function(e){return u.apply(this,arguments)}}(),Ft=function(t,e){var r=t.cssText,n=/url\(["']?([^"')]+)["']?\)/g,a=r.match(/url\([^)]+\)/g)||[],o=a.map(function(){var l=E()(f()().mark(function i(c){var s;return f()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return s=c.replaceAll(n,"$1"),s.startsWith("https://")||(s=new URL(s,t.url).href),h.abrupt("return",Dt(s,e.fetchRequestInit,function(g){var p=g.result;return r=r.replace(c,"url(".concat(p,")")),[c,p]}));case 3:case"end":return h.stop()}},i)}));return function(i){return l.apply(this,arguments)}}());return Promise.all(o).then(function(){return r})},Ht=function(t){if(!t)return[];for(var e=[],r=/(\/\*[\S\s]*?\*\/)/gi,n=t.replaceAll(r,""),a=new RegExp(String.raw(Lt||(Lt=ke()(["((@.*?keyframes [sS]*?){([sS]*?}s*?)})"],["((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})"]))),"gi");;){var o=a.exec(n);if(o===null)break;e.push(o[0])}n=n.replaceAll(a,"");for(var l=/@import[\S\s]*?url\([^)]*\)[\S\s]*?;/gi,i=String.raw(_t||(_t=ke()(["((s*?(?:/*[sS]*?*/)?s*?@media[sS]"],["((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]"])))+String.raw(zt||(zt=ke()(["*?){([sS]*?)}s*?})|(([sS]*?){([sS]*?)})"],["*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})"]))),c=new RegExp(i,"gi");;){var s=l.exec(n);if(s===null){if(s=c.exec(n),s===null)break;l.lastIndex=c.lastIndex}else c.lastIndex=l.lastIndex;e.push(s[0])}return e},pn=function(){var u=E()(f()().mark(function t(e,r){var n,a;return f()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return n=[],a=[],e.forEach(function(i){if("cssRules"in i)try{ne(i.cssRules||[]).forEach(function(s,d){if(s.type===CSSRule.IMPORT_RULE){var h=d+1,g=s.href,p=Ut(g).then(function(y){return Ft(y,r)}).then(function(y){return Ht(y).forEach(function(C){try{i.insertRule(C,C.startsWith("@import")?h+=1:i.cssRules.length)}catch(m){console.error("Error inserting rule from remote css",{rule:C,error:m})}})}).catch(function(y){console.error("Error loading remote css",y.toString())});a.push(p)}})}catch(s){var c=e.find(function(d){return d.href==null})||document.styleSheets[0];i.href!=null&&a.push(Ut(i.href).then(function(d){return Ft(d,r)}).then(function(d){return Ht(d).forEach(function(h){c.insertRule(h,i.cssRules.length)})}).catch(function(d){console.error("Error loading remote stylesheet",d)})),console.error("Error inlining remote css file",s)}}),l.abrupt("return",Promise.all(a).then(function(){return e.forEach(function(i){if("cssRules"in i)try{ne(i.cssRules||[]).forEach(function(c){n.push(c)})}catch(c){console.error("Error while reading CSS rules from ".concat(i.href),c)}}),n}));case 4:case"end":return l.stop()}},t)}));return function(e,r){return u.apply(this,arguments)}}(),gn=function(t){return t.filter(function(e){return e.type===CSSRule.FONT_FACE_RULE}).filter(function(e){return ze(e.style.getPropertyValue("src"))})},fn=function(){var u=E()(f()().mark(function t(e,r){var n,a;return f()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(e.ownerDocument!=null){l.next=2;break}throw new Error("Provided element is not within a Document");case 2:return n=ne(e.ownerDocument.styleSheets),l.next=5,pn(n,r);case 5:return a=l.sent,l.abrupt("return",gn(a));case 7:case"end":return l.stop()}},t)}));return function(e,r){return u.apply(this,arguments)}}(),mn=function(){var u=E()(f()().mark(function t(e,r){var n,a;return f()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,fn(e,r);case 2:return n=l.sent,l.next=5,Promise.all(n.map(function(i){var c=i.parentStyleSheet?i.parentStyleSheet.href:null;return Rt(i.cssText,c,r)}));case 5:return a=l.sent,l.abrupt("return",a.join(`
`));case 7:case"end":return l.stop()}},t)}));return function(e,r){return u.apply(this,arguments)}}(),Sn=function(){var u=E()(f()().mark(function t(e,r){var n,a,o;return f()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(r.fontEmbedCSS!=null){i.next=11;break}if(!r.skipFonts){i.next=5;break}i.t1=null,i.next=8;break;case 5:return i.next=7,mn(e,r);case 7:i.t1=i.sent;case 8:i.t0=i.t1,i.next=12;break;case 11:i.t0=r.fontEmbedCSS;case 12:n=i.t0,n&&(a=document.createElement("style"),o=document.createTextNode(n),a.append(o),e.firstChild?e.insertBefore(a,e.firstChild):e.append(a));case 14:case"end":return i.stop()}},t)}));return function(e,r){return u.apply(this,arguments)}}(),je=function(){var u=E()(f()().mark(function t(e){var r,n,a,o,l,i=arguments;return f()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return r=i.length>1&&i[1]!==void 0?i[1]:{},n=Le(e,r),a=n.width,o=n.height,s.next=4,Te(e,r,!0);case 4:return l=s.sent,s.next=7,Sn(l,r);case 7:return s.next=9,At(l,r);case 9:return Br(l,r),s.abrupt("return",fr(l,a,o));case 11:case"end":return s.stop()}},t)}));return function(e){return u.apply(this,arguments)}}(),yn=function(){var u=E()(f()().mark(function t(e){var r,n,a,o=arguments;return f()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return r=o.length>1&&o[1]!==void 0?o[1]:{},i.next=3,je(e,r);case 3:return n=i.sent,i.next=6,Et(n);case 6:return a=i.sent,i.abrupt("return",a);case 8:case"end":return i.stop()}},t)}));return function(e){return u.apply(this,arguments)}}(),Cn=yn,wn=function(t){var e;return(e=t&&xe(t)?t==null?void 0:t.ownerDocument:t)!==null&&e!==void 0?e:window.document},Pn=function u(t,e){return new Promise(function(r){var n=e!=null?e:{},a=n.timeout,o=n.ownerDocument,l=n.onError,i=typeof t=="string"?bt(t,wn(o)):t,c=null,s=null,d=function(){var b;r(i),c&&clearTimeout(c),(b=s)===null||b===void 0||b()};if(a&&(c=setTimeout(d,a)),Ir(i)){var h=i.currentSrc||i.src;if(!h){if(i.poster)return u(i.poster,e).then(r);d();return}if(i.readyState>=2){d();return}var g=d,p=function(b){l==null||l(b),d()};s=function(){i.removeEventListener("loadeddata",g),i.removeEventListener("error",p)},i.addEventListener("loadeddata",g,{once:!0}),i.addEventListener("error",p,{once:!0})}else{var y=xr(i)?i.href.baseVal:i.currentSrc||i.src;if(!y){d();return}var C=function(){var P=E()(f()().mark(function b(){return f()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(!(Ue(i)&&"decode"in i)){T.next=9;break}return T.prev=1,T.next=4,i.decode();case 4:T.next=9;break;case 6:T.prev=6,T.t0=T.catch(1),console.log("error:",T.t0);case 9:d();case 10:case"end":return T.stop()}},b,null,[[1,6]])}));return function(){return P.apply(this,arguments)}}(),m=function(b){console.log("error:",b),d()};if(Ue(i)&&i.complete)return C();s=function(){i.removeEventListener("load",C),i.removeEventListener("error",m)},i.addEventListener("load",C,{once:!0}),i.addEventListener("error",m,{once:!0})}})},In=Pn,En=function(){var u=E()(f()().mark(function t(e){var r,n,a,o,l,i,c,s,d,h,g,p,y,C,m,P,b,I,T,le=arguments;return f()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return r=le.length>1&&le[1]!==void 0?le[1]:{},n=r.timeout,a=n===void 0?3e4:n,o=r.drawImageInterval,l=o===void 0?100:o,i=Le(e,r),c=i.width,s=i.height,O.next=5,je(e,r);case 5:return d=O.sent,O.next=8,Et(d);case 8:return h=O.sent,g=bt(h,d.ownerDocument),O.next=12,In(g,{timeout:a});case 12:p=O.sent,y=wr(g.ownerDocument,x()(x()({},r),{},{width:c,height:s})),C=y.canvas,m=y.context2d,P=function(){try{m==null||m.drawImage(p,0,0,C.width,C.height)}catch(Ie){console.log("error:",Ie)}},P(),b=f()().mark(function oe(Ie){return f()().wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:return ye.next=2,new Promise(function(Pt){setTimeout(function(){P(),Pt()},Ie+l)});case 2:case"end":return ye.stop()}},oe)}),I=0;case 18:if(!(I<((T=window.drawImageCount)!==null&&T!==void 0?T:0))){O.next=23;break}return O.delegateYield(b(I),"t0",20);case 20:I++,O.next=18;break;case 23:return window.drawImageCount=0,O.abrupt("return",C);case 25:case"end":return O.stop()}},t)}));return function(e){return u.apply(this,arguments)}}(),ve=En,bn=function(){var u=E()(f()().mark(function t(e){var r,n,a,o=arguments;return f()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return r=o.length>1&&o[1]!==void 0?o[1]:{},i.next=3,ve(e,r);case 3:return n=i.sent,i.next=6,gr(n);case 6:return a=i.sent,i.abrupt("return",a);case 8:case"end":return i.stop()}},t)}));return function(e){return u.apply(this,arguments)}}(),xn=bn,Tn=function(){var u=E()(f()().mark(function t(e){var r,n,a=arguments;return f()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return r=a.length>1&&a[1]!==void 0?a[1]:{},l.next=3,ve(e,r);case 3:return n=l.sent,l.abrupt("return",n.toDataURL("image/jpeg",r.quality||1));case 5:case"end":return l.stop()}},t)}));return function(e){return u.apply(this,arguments)}}(),kn=Tn,Dn=function(){var u=E()(f()().mark(function t(e){var r,n,a,o,l,i,c=arguments;return f()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return r=c.length>1&&c[1]!==void 0?c[1]:{},n=Le(e,r),a=n.width,o=n.height,d.next=4,ve(e,r);case 4:return l=d.sent,i=l.getContext("2d"),d.abrupt("return",i.getImageData(0,0,a,o).data);case 7:case"end":return d.stop()}},t)}));return function(e){return u.apply(this,arguments)}}(),Bn=Dn,Mn=function(){var u=E()(f()().mark(function t(e){var r,n,a=arguments;return f()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return r=a.length>1&&a[1]!==void 0?a[1]:{},l.next=3,ve(e,r);case 3:return n=l.sent,l.abrupt("return",n.toDataURL());case 5:case"end":return l.stop()}},t)}));return function(e){return u.apply(this,arguments)}}(),On=Mn,Rn=v(15930),An={200:"\u670D\u52A1\u5668\u6210\u529F\u8FD4\u56DE\u8BF7\u6C42\u7684\u6570\u636E\u3002",201:"\u65B0\u5EFA\u6216\u4FEE\u6539\u6570\u636E\u6210\u529F\u3002",202:"\u4E00\u4E2A\u8BF7\u6C42\u5DF2\u7ECF\u8FDB\u5165\u540E\u53F0\u6392\u961F\uFF08\u5F02\u6B65\u4EFB\u52A1\uFF09\u3002",204:"\u5220\u9664\u6570\u636E\u6210\u529F\u3002",400:"\u8BF7\u6C42\u6709\u9519\u8BEF\uFF0C\u8BF7\u91CD\u8BD5\uFF01",401:"\u7528\u6237\u6CA1\u6709\u6743\u9650\uFF08\u4EE4\u724C\u3001\u7528\u6237\u540D\u3001\u5BC6\u7801\u9519\u8BEF\uFF09\u3002",403:"\u7528\u6237\u5F97\u5230\u6388\u6743\uFF0C\u4F46\u662F\u8BBF\u95EE\u662F\u88AB\u7981\u6B62\u7684\u3002",404:"\u53D1\u51FA\u7684\u8BF7\u6C42\u9488\u5BF9\u7684\u662F\u4E0D\u5B58\u5728\u7684\u8BB0\u5F55\uFF0C\u670D\u52A1\u5668\u6CA1\u6709\u8FDB\u884C\u64CD\u4F5C\u3002",406:"\u8BF7\u6C42\u7684\u683C\u5F0F\u4E0D\u53EF\u5F97\u3002",410:"\u8BF7\u6C42\u7684\u8D44\u6E90\u88AB\u6C38\u4E45\u5220\u9664\uFF0C\u4E14\u4E0D\u4F1A\u518D\u5F97\u5230\u7684\u3002",422:"\u5F53\u521B\u5EFA\u4E00\u4E2A\u5BF9\u8C61\u65F6\uFF0C\u53D1\u751F\u4E00\u4E2A\u9A8C\u8BC1\u9519\u8BEF\u3002",500:"\u670D\u52A1\u5668\u53D1\u751F\u9519\u8BEF\uFF0C\u8BF7\u68C0\u67E5\u670D\u52A1\u5668\u3002",502:"\u7F51\u5173\u9519\u8BEF\u3002",503:"\u670D\u52A1\u4E0D\u53EF\u7528\uFF0C\u670D\u52A1\u5668\u6682\u65F6\u8FC7\u8F7D\u6216\u7EF4\u62A4\u3002",504:"\u7F51\u5173\u8D85\u65F6\u3002"},Gt=function(t){var e,r,n,a=t==null||(e=t.response)===null||e===void 0?void 0:e.status;return{error:t,status:a,response:t==null?void 0:t.response,message:(0,D.toString)(t==null||(r=t.response)===null||r===void 0?void 0:r.data),codeMessage:An[a],statusText:t==null||(n=t.response)===null||n===void 0?void 0:n.statusText}},Nt=Rn.Z.create();Nt.interceptors.response.use(function(u){return u},Gt);var Ln=Nt,_n=v(25298),he=v.n(_n),zn=v(17069),pe=v.n(zn),Wn=v(82092),S=v.n(Wn),Un=function(t,e,r){var n=window.devicePixelRatio||1;t.width=Math.round(e*n),t.height=Math.round(r*n),t.style.width="".concat(e,"px"),t.style.height="".concat(r,"px");var a=t.getContext("2d");return a&&a.scale(n,n),a},ge=Un,Fn=function(t){return t>0?t:0},B=Fn,Hn=function(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document.body,n=r.getBoundingClientRect();return{left:t||Math.abs(n.left),top:e||Math.abs(n.top)}},Xe=Hn,Gn=function(){var t,e=new F;e.popHistory();var r=(t=e.getScreenShotContainer())===null||t===void 0?void 0:t.getContext("2d");r!=null&&e.getHistory().length>0&&r.putImageData(e.getHistory()[e.getHistory().length-1].data,0,0),e.setUndoClickNum(e.getUndoClickNum()+1),e.getHistory().length-1<=0&&(e.setUndoClickNum(0),e.setUndoStatus(!1))},Kt=Gn,Ze=!1,Ye=null,Be=!1,Je=0,Ve=0,Qe=!1,qe=null,Ce={r:0,g:0,b:0,a:.6},et=!0,tt="#2CABFF",rt=15,nt=!1,at=!1,ot=null,lt=null,it=window.devicePixelRatio||1,j=function(){function u(){he()(this,u),Be&&(Ze=!1,Je=0,Ve=0,tt="#2CABFF",Qe=!1,et=!0,Ye=null,Be=!1,qe=null,ot=null,rt=15,nt=!1,at=!1,lt=null,it=window.devicePixelRatio||1)}return pe()(u,[{key:"setInitStatus",value:function(e){Be=e}},{key:"getInitStatus",value:function(){return Be}},{key:"getWebRtcStatus",value:function(){return Ze}},{key:"setWebRtcStatus",value:function(e){Ze=e}},{key:"setScreenShotDom",value:function(e){qe=e}},{key:"getCutBoxBdColor",value:function(){return tt}},{key:"setCutBoxBdColor",value:function(e){tt=e}},{key:"getScreenShotDom",value:function(){return qe}},{key:"getScreenFlow",value:function(){return Ye}},{key:"setScreenFlow",value:function(e){Ye=e}},{key:"getCanvasSize",value:function(){return{canvasWidth:Je,canvasHeight:Ve}}},{key:"setCanvasSize",value:function(e,r){Je=e,Ve=r}},{key:"getShowScreenDataStatus",value:function(){return Qe}},{key:"setShowScreenDataStatus",value:function(e){Qe=e}},{key:"setMaskColor",value:function(e){Ce.r=e.r,Ce.g=e.g,Ce.b=e.b,Ce.a=e.a}},{key:"getMaskColor",value:function(){return Ce}},{key:"setWriteImgState",value:function(e){et=e}},{key:"getWriteImgState",value:function(){return et}},{key:"setSaveCallback",value:function(e){ot=e}},{key:"getSaveCallback",value:function(){return ot}},{key:"setMaxUndoNum",value:function(e){rt=e}},{key:"getMaxUndoNum",value:function(){return rt}},{key:"setRatioArrow",value:function(e){nt=e}},{key:"getRatioArrow",value:function(){return nt}},{key:"setImgAutoFit",value:function(e){at=e}},{key:"getImgAutoFit",value:function(){return at}},{key:"setSaveImgTitle",value:function(e){lt=e}},{key:"getSaveImgTitle",value:function(){return lt}},{key:"setRatio",value:function(e){it=e}},{key:"getRatio",value:function(){return it}}]),u}(),$t=!1,st=!1,ut=!1,Me="#F53340",ct="",dt=2,vt=10,Nn=10,ht=0,we=[],Kn=!1,pt=!1,fe={startX:0,startY:0,width:0,height:0},A=null,U=null,H=null,ae=null,_=null,ie=null,se=null,ue=null,gt=17,N=null,ce=null,de=null,me=null,X=null,jt=null,Oe=!1,ft=!1,Xt="",Zt,Re=!1,mt=!1,F=function(){function u(){he()(this,u),ft&&(ft=!1,A=null,st=!1,U=null,ae=null,N=null,_=null,ie=null,se=null,ue=null,H=null,fe={startX:0,startY:0,width:0,height:0},ut=!1,Re=!1,mt=!1,pt=!1,Me="#F53340",ct="",dt=2,gt=17,vt=10,we=[],ht=0,ce=null,de=null,me=null,X=null)}return pe()(u,[{key:"setInitStatus",value:function(e){ft=e}},{key:"setScreenShotInfo",value:function(e,r){this.getScreenShotContainer(),A!=null&&(Oe&&document.body.classList.add("__screenshot-lock-scroll"),A.width=e,A.height=r)}},{key:"setScreenShotPosition",value:function(e,r){if(this.getScreenShotContainer(),A!=null){var n=Xe(e,r),a=n.left,o=n.top;A.style.left="".concat(a,"px"),A.style.top="".concat(o,"px")}}},{key:"showScreenShotPanel",value:function(){this.getScreenShotContainer(),A!=null&&(A.style.display="block")}},{key:"getScreenShotContainer",value:function(){return A=document.querySelector("#screenShotContainer"),A}},{key:"getToolController",value:function(){return U=document.querySelector("#toolPanel"),U}},{key:"getCutBoxSizeContainer",value:function(){return H=document.querySelector("#cutBoxSizePanel"),H}},{key:"getTextInputController",value:function(){return ae=document.querySelector("#textInputPanel"),ae}},{key:"getTextStatus",value:function(){return Kn}},{key:"getScreenShotImageController",value:function(){return jt}},{key:"setScreenShotImageController",value:function(e){jt=e}},{key:"setToolStatus",value:function(e){if(U=this.getToolController(),e){U.style.display="block";return}U.style.display="none"}},{key:"setCutBoxSizeStatus",value:function(e){if(H!=null){if(e){H.style.display="flex";return}H.style.display="none"}}},{key:"setCutBoxSizePosition",value:function(e,r){if(H!=null){var n=Xe(e,r),a=n.left,o=n.top;H.style.left="".concat(a,"px");var l=0;A&&(l=Number.parseInt(A.style.top)),H.style.top="".concat(o+l,"px")}}},{key:"setTextEditState",value:function(e){mt=e}},{key:"getTextEditState",value:function(){return mt}},{key:"setCutBoxSize",value:function(e,r){if(H!=null){var n=Math.floor(e),a=Math.floor(r),o=H.childNodes;if(o.length>0){o[0].textContent="".concat(n," * ").concat(a);return}var l=document.createElement("p");l.textContent="".concat(n," * ").concat(a),H.append(l)}}},{key:"setTextStatus",value:function(e){if(ae=this.getTextInputController(),ae!=null){if(e){ae.style.display="block";return}ae.style.display="none"}}},{key:"setToolInfo",value:function(e,r){U=document.querySelector("#toolPanel");var n=Xe(e,r),a=n.left,o=n.top;U.style.left="".concat(a,"px");var l=0;A&&(l=Number.parseInt(A.style.top)),U.style.top="".concat(o+l,"px")}},{key:"getToolClickStatus",value:function(){return ut}},{key:"setToolClickStatus",value:function(e){ut=e}},{key:"setResetScrollbarState",value:function(e){Re=e}},{key:"getResetScrollbarState",value:function(){return Re}},{key:"getCutOutBoxPosition",value:function(){return fe}},{key:"getDragging",value:function(){return st}},{key:"setDragging",value:function(e){st=e}},{key:"getDraggingTrim",value:function(){return $t}},{key:"getToolPositionStatus",value:function(){return pt}},{key:"setToolPositionStatus",value:function(e){pt=e}},{key:"setDraggingTrim",value:function(e){$t=e}},{key:"setCutOutBoxPosition",value:function(e,r,n,a){fe.startX=e,fe.startY=r,fe.width=n,fe.height=a}},{key:"setFontSize",value:function(e){gt=e}},{key:"setOptionStatus",value:function(e){if(_=this.getOptionIcoController(),N=this.getOptionController(),!(_==null||N==null)){if(e){_.style.display="block",N.style.display="block";return}_.style.display="none",N.style.display="none"}}},{key:"getFontSize",value:function(){return gt}},{key:"setTextSizeOptionStatus",value:function(e){if(ie=this.getOptionTextSizeController(),ie!=null){if(e){ie.style.display="flex";return}ie.style.display="none"}}},{key:"setTextSizePanelStatus",value:function(e){if(ue=this.getTextSizeContainer(),ue!=null){if(e){ue.style.display="flex";return}ue.style.display="none"}}},{key:"setBrushSelectionStatus",value:function(e){if(se=this.getBrushSelectionController(),se!=null){if(e){se.style.display="block";return}se.style.display="none"}}},{key:"hiddenOptionIcoStatus",value:function(){_=this.getOptionIcoController(),_!=null&&(_.style.display="none")}},{key:"getOptionIcoController",value:function(){return _=document.querySelector("#optionIcoController"),_}},{key:"getTextSizeContainer",value:function(){return ue=document.querySelector("#textSizePanel"),ue}},{key:"getOptionTextSizeController",value:function(){return ie=document.querySelector("#textSelectPanel"),ie}},{key:"getBrushSelectionController",value:function(){return se=document.querySelector("#brushSelectPanel"),se}},{key:"getOptionController",value:function(){return N=document.querySelector("#optionPanel"),N}},{key:"setOptionPosition",value:function(e){if(_=this.getOptionIcoController(),N=this.getOptionController(),!(_==null||N==null)){var r=this.getToolPosition();if(r!=null){var n="".concat(r.left+e,"px"),a="".concat(r.top+44,"px"),o="".concat(r.left,"px"),l="".concat(r.top+44+6,"px");_.style.left=n,_.style.top=a,N.style.left=o,N.style.top=l}}}},{key:"getToolPosition",value:function(){if(U=this.getToolController(),U!=null)return{left:U.offsetLeft,top:U.offsetTop}}},{key:"getSelectedColor",value:function(){return Me}},{key:"setSelectedColor",value:function(e){Me=e,me=this.getColorSelectPanel(),me!=null&&(me.style.backgroundColor=Me)}},{key:"getColorSelectPanel",value:function(){return me=document.querySelector("#colorSelectPanel"),me}},{key:"getToolName",value:function(){return ct}},{key:"setToolName",value:function(e){ct=e}},{key:"getPenSize",value:function(){return dt}},{key:"setPenSize",value:function(e){dt=e}},{key:"getMosaicPenSize",value:function(){return vt}},{key:"setMosaicPenSize",value:function(e){vt=e}},{key:"getBorderSize",value:function(){return Nn}},{key:"getHistory",value:function(){return we}},{key:"shiftHistory",value:function(){return we.shift()}},{key:"popHistory",value:function(){return we.pop()}},{key:"pushHistory",value:function(e){we.push(e)}},{key:"getUndoClickNum",value:function(){return ht}},{key:"setUndoClickNum",value:function(e){ht=e}},{key:"getColorPanel",value:function(){return ce=document.querySelector("#colorPanel"),ce}},{key:"setColorPanelStatus",value:function(e){if(ce=this.getColorPanel(),ce!=null){if(e){ce.style.display="flex";return}ce.style.display="none"}}},{key:"getNoScrollStatus",value:function(){return Oe}},{key:"setNoScrollStatus",value:function(e){e!=null&&(Oe=e)}},{key:"setActiveToolName",value:function(e){Xt=e}},{key:"getActiveToolName",value:function(){return Xt}},{key:"setTextInfo",value:function(e){Zt=e}},{key:"getTextInfo",value:function(){return Zt}},{key:"getRightPanel",value:function(){return de=document.querySelector("#rightPanel"),de}},{key:"setRightPanel",value:function(e){if(de=this.getRightPanel(),de!=null){if(e){de.style.display="flex";return}de.style.display="none"}}},{key:"setUndoStatus",value:function(e){if(X=this.getUndoController(),X!=null){if(e){X.classList.add("undo"),X.classList.remove("undo-disabled"),X.addEventListener("click",this.cancelEvent);return}X.classList.add("undo-disabled"),X.classList.remove("undo"),X.removeEventListener("click",this.cancelEvent)}}},{key:"cancelEvent",value:function(){Kt()}},{key:"getUndoController",value:function(){return X=document.querySelector("#undoPanel"),X}},{key:"destroyDOM",value:function(){if(!(A==null||U==null||_==null||N==null||ae==null||H==null)){var e=new j;Oe&&document.body.classList.remove("__screenshot-lock-scroll"),A.remove(),U.remove(),_.remove(),N.remove(),ae.remove(),H.remove(),document.body.classList.contains("no-cursor")&&document.body.classList.remove("no-cursor"),Re&&(document.documentElement.classList.remove("hidden-screen-shot-scroll"),document.body.classList.remove("hidden-screen-shot-scroll")),e.setInitStatus(!0)}}}]),u}(),$n=function(t){var e=new F,r="#F53440";switch(t){case 1:{r="#F53440";break}case 2:{r="#F65E95";break}case 3:{r="#D254CF";break}case 4:{r="#12A9D7";break}case 5:{r="#30A345";break}case 6:{r="#FACF50";break}case 7:{r="#F66632";break}case 8:{r="#989998";break}case 9:{r="#000000";break}case 10:{r="#FEFFFF";break}}return e.setSelectedColor(r),e.setColorPanelStatus(!1),r},jn=$n,Xn=function(){var t=new F;t.setColorPanelStatus(!0)},Yt=Xn,Zn=function(){var t=new F;t.setTextSizeOptionStatus(!0)},Yn=function(t){var e=new F;e.setFontSize(t)},Jn=function(){var t=new F;return t.getFontSize()},Vn=function(){var t=new F;t.setTextSizeOptionStatus(!1)},Qn=function(){var t=new F;t.setColorPanelStatus(!1)},qn=function(t){var e="";switch(t){case 1:{e="brush-small-active";break}case 2:{e="brush-medium-active";break}case 3:{e="brush-big-active";break}}return e},ea=qn,ta=function(t){var e="";switch(t){case 1:{e="square-active";break}case 2:{e="round-active";break}case 3:{e="right-top-active";break}case 4:{e="brush-active";break}case 5:{e="mosaicPen-active";break}case 6:e="text-active"}return e},ra=ta,na=function(t,e,r){var n=ra(e);r&&(n=ea(e));var a=t.path||t.composedPath&&t.composedPath(),o=a[1].children,l=Fe()(o),i;try{for(l.s();!(i=l.n()).done;){var c=i.value;c.className.includes("active")&&c.classList.remove(c.classList[2])}}catch(s){l.e(s)}finally{l.f()}t.target.className+=" ".concat(n)},St=na,yt=function(t,e,r){var n=new F;St(r,e,!0);var a=2;switch(t){case"small":{a=2;break}case"medium":{a=5;break}case"big":{a=10;break}}return n.setPenSize(a),a},Ct=function(t,e,r){var n=new F;St(r,e,!0);var a=10;switch(t){case"small":{a=10;break}case"medium":{a=20;break}case"big":{a=40;break}}return n.setMosaicPenSize(a),a},aa=[{id:1,title:"square"},{id:2,title:"round"},{id:3,title:"right-top"},{id:4,title:"brush"},{id:5,title:"mosaicPen"},{id:6,title:"text"},{id:7,title:"separateLine"},{id:8,title:"save"},{id:9,title:"undo"},{id:10,title:"close"},{id:11,title:"confirm"}],oa=function(t,e,r,n,a){var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:.75,l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!0,i=window.devicePixelRatio||1,c=t.getImageData(e*i,r*i,n*i,a*i),s=document.createElement("canvas"),d=ge(s,n,a);return d?(d.putImageData(c,0,0),l&&(s==null||s.toBlob(function(h){var g;if(h!=null){var p=window.ClipboardItem;if(p==null)return s.toDataURL("png");var y=new p(S()({},h.type,h));(g=navigator.clipboard)===null||g===void 0||g.write([y]).then(function(){return"\u5199\u5165\u6210\u529F"})}},"image/png",o)),s.toDataURL("png")):""},la=oa,ia=function(t,e,r,n,a){var o=new j,l=window.devicePixelRatio||1,i=t.getImageData(e*l,r*l,n*l,a*l),c=document.createElement("canvas"),s=ge(c,n,a);if(s){s.putImageData(i,0,0);var d=document.createElement("a");d.href=c.toDataURL("png");var h=(o==null?void 0:o.getSaveImgTitle())||Date.now();d.download="".concat(h,".png"),d.click()}},sa=ia,ua=function(t){var e,r=new F,n=new j,a=(e=r.getScreenShotContainer())===null||e===void 0?void 0:e.getContext("2d"),o=r.getCutOutBoxPosition(),l=o.startX,i=o.startY,c=o.width,s=o.height,d="";return a&&(t?sa(a,l,i,c,s):d=la(a,l,i,c,s,.75,n.getWriteImgState())),d},Jt=ua,ca=function(){var t=new F,e=new j,r=t.getScreenShotContainer();if(r!=null){var n=r.getContext("2d"),a=r;t.getHistory().length>e.getMaxUndoNum()&&t.shiftHistory(),t.pushHistory({data:n.getImageData(0,0,a.width,a.height)}),t.setUndoStatus(!0)}},Pe=ca,da=function(t){switch(t){case 1:return 16;case 2:return 24*2+8;case 3:return 24*4-6;case 4:return 24*5+8;case 5:return 24*7+6;case 6:return 24*9-6;default:return 0}},va=da,ha=function(t,e,r,n,a,o,l,i){var c=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!0,s=l==null?void 0:l.width,d=l==null?void 0:l.height,h=new j,g=h.getRatio();if(!(!s||!d||!i||!l)){a.clearRect(0,0,s,d);var p=r===0?5:r,y=n===0?5:n;a.save();var C=h.getMaskColor();if(a.fillStyle="rgba(0, 0, 0, .6)",C&&(a.fillStyle="rgba(".concat(C.r,", ").concat(C.g,", ").concat(C.b,", ").concat(C.a,")")),a.fillRect(0,0,s,d),a.globalCompositeOperation="source-atop",a.clearRect(t,e,p,y),a.globalCompositeOperation="source-over",a.fillStyle=h.getCutBoxBdColor(),c){var m=o;a.fillRect(t-m/2,e-m/2,m,m),a.fillRect(t-m/2+p/2,e-m/2,m,m),a.fillRect(t-m/2+p,e-m/2,m,m),a.fillRect(t-m/2,e-m/2+y/2,m,m),a.fillRect(t-m/2+p,e-m/2+y/2,m,m),a.fillRect(t-m/2,e-m/2+y,m,m),a.fillRect(t-m/2+p/2,e-m/2+y,m,m),a.fillRect(t-m/2+p,e-m/2+y,m,m)}a.restore(),a.save(),a.globalCompositeOperation="destination-over";var P={imgWidth:Number.parseInt(l==null?void 0:l.style.width),imgHeight:Number.parseInt(l==null?void 0:l.style.height)},b=P.imgWidth,I=P.imgHeight,T=h.getScreenShotDom();return T!=null&&(b=T.clientWidth,I=T.clientHeight),!h.getWebRtcStatus()&&!h.getImgAutoFit()&&T==null&&(b=i.width/g,I=i.height/g),a.drawImage(i,0,0,b,I),a.restore(),p>0&&y>0?{startX:t,startY:e,width:p,height:y}:p<0&&y<0?{startX:t+p,startY:e+y,width:Math.abs(p),height:Math.abs(y)}:p>0&&y<0?{startX:t,startY:e+y,width:p,height:Math.abs(y)}:p<0&&y>0?{startX:t+p,startY:e,width:Math.abs(p),height:y}:{startX:t,startY:e,width:p,height:y}}},Se=ha,pa=function(t,e,r,n,a,o){o.save(),o.lineWidth=1,o.fillStyle=n,o.textBaseline="middle",o.font="bold ".concat(a,"px none");var l=t.split(`
`);console.log(l);var i=a*1.4;l.forEach(function(c,s){var d=r+i*s;o.fillText(c,e,d)}),o.restore()},wt=pa,ga=function(t,e,r,n,a){var o=new F,l=new j,i=o.getTextInputController(),c=o.getScreenShotContainer(),s=o.getScreenShotImageController();if(o.setActiveToolName(t),!(c==null||s==null)){var d=c.getContext("2d");if(!o.getToolClickStatus()){var h,g,p=((h=o.getToolPosition())===null||h===void 0?void 0:h.left)||0,y=((g=o.getToolPosition())===null||g===void 0?void 0:g.top)||0;y&&o.getToolPositionStatus()&&o.setToolInfo(p,y-46),o.setToolStatus(!0);var C=o.getCutOutBoxPosition();Se(C.startX,C.startY,C.width,C.height,d,o.getBorderSize(),c,s,!1)}if(o.setToolName(t),St(r,e,!1),t==="text"){var m;o.setTextSizePanelStatus(!0),o.setBrushSelectionStatus(!1),(m=o.getColorSelectPanel())===null||m===void 0||m.classList.add("text-select-status")}else o.setTextSizePanelStatus(!1),o.setBrushSelectionStatus(!0);if(o.setOptionStatus(!0),o.setOptionPosition(va(e)),o.setRightPanel(!0),t==="mosaicPen"&&(o.setRightPanel(!1),o.hiddenOptionIcoStatus()),i!=null&&o.getTextStatus()||i!=null&&t!=="text"){var P=i.textContent;if(P&&P!==""){var b=o.getTextInfo(),I=b.positionX,T=b.positionY,le=b.color,Ae=b.size;wt(P,I,T,le,Ae,d),Pe()}i.innerHTML="",o.setTextStatus(!1)}if(o.setDragging(!1),o.setDraggingTrim(!1),t==="save"){Jt(!0);var O=l.getSaveCallback();O&&O(0,"\u4FDD\u5B58\u6210\u529F"),o.destroyDOM(),o.setInitStatus(!0)}if(t==="close"&&(a&&a(),o.destroyDOM(),o.setInitStatus(!0)),t==="confirm"){var oe=Jt(!1);n&&n({base64:oe,cutInfo:o.getCutOutBoxPosition()}),o.destroyDOM(),o.setInitStatus(!0)}t==="undo"&&(o.setOptionStatus(!1),Kt()),o.setToolClickStatus(!0)}},fa=ga,ma=function(){function u(t){if(he()(this,u),S()(this,"screenShotController",void 0),S()(this,"toolController",void 0),S()(this,"optionIcoController",void 0),S()(this,"optionController",void 0),S()(this,"cutBoxSizeContainer",void 0),S()(this,"textInputController",void 0),S()(this,"completeCallback",void 0),S()(this,"closeCallback",void 0),S()(this,"hiddenIcoArr",void 0),S()(this,"toolbar",void 0),S()(this,"textFontSizeList",[12,13,14,15,16,17,20,24,36,48,64,72,96]),this.screenShotController=document.createElement("canvas"),this.toolController=document.createElement("div"),this.optionIcoController=document.createElement("div"),this.optionController=document.createElement("div"),this.cutBoxSizeContainer=document.createElement("div"),this.textInputController=document.createElement("div"),this.completeCallback=t==null?void 0:t.completeCallback,this.closeCallback=t==null?void 0:t.closeCallback,this.hiddenIcoArr=[],this.optionController.addEventListener("click",function(r){var n=r.target;n.id==="colorSelectPanel"||n.id==="textSizePanel"||(Vn(),Qn())}),(!t||!Object.prototype.hasOwnProperty.call(t,"completeCallback"))&&(this.completeCallback=function(r){sessionStorage.setItem("screenShotImg",JSON.stringify(r))}),t!=null&&t.hiddenToolIco)for(var e in t.hiddenToolIco)t.hiddenToolIco[e]&&this.filterHideIcon(e);this.setAllControllerId(),this.setOptionIcoClassName(),this.toolbar=aa,this.setToolBarIco(),this.setTextSizeSelectPanel(),this.setBrushSelectPanel(),this.setTextInputPanel(),this.setDomToBody(),this.hiddenAllDom()}return pe()(u,[{key:"setToolBarIco",value:function(){for(var e=this,r=function(){for(var o=e.toolbar[n],l=!1,i=0;i<e.hiddenIcoArr.length;i++)if(e.hiddenIcoArr[i]===o.title){l=!0;break}if(l)return 1;var c=document.createElement("div");o.title==="undo"?(c.className="item-panel undo-disabled",c.id="undoPanel"):(c.className="item-panel ".concat(o.title),c.addEventListener("click",function(s){fa(o.title,o.id,s,e.completeCallback,e.closeCallback)})),c.dataset.title=o.title,c.dataset.id="".concat(o.id),e.toolController.append(c)},n=0;n<this.toolbar.length;n++)r();this.hiddenIcoArr.length>0&&(this.toolController.style.minWidth="24px")}},{key:"setTextSizeSelectPanel",value:function(){var e=this,r=document.createElement("div");r.className="text-size-panel",r.textContent="".concat(Jn()," px"),r.id="textSizePanel";var n=document.createElement("div");n.className="text-select-panel",n.id="textSelectPanel";for(var a=function(){var i=document.createElement("div"),c=e.textFontSizeList[o];i.className="text-item",i.dataset.value="".concat(c),i.textContent="".concat(c," px"),i.addEventListener("click",function(){n.style.display="none";var s=i.dataset.value;r.textContent="".concat(s," px"),s&&Yn(Number(s))}),n.append(i)},o=0;o<this.textFontSizeList.length;o++)a();r.style.display="none",n.style.display="none",r.addEventListener("click",function(){Zn()}),this.optionController.append(r),this.optionController.append(n)}},{key:"setBrushSelectPanel",value:function(){var e=document.createElement("div");e.id="brushSelectPanel",e.className="brush-select-panel";for(var r=0;r<3;r++){var n=document.createElement("div");switch(n.className="item-panel",r){case 0:{n.classList.add("brush-small"),n.classList.add("brush-small-active"),n.addEventListener("click",function(d){yt("small",1,d),Ct("small",1,d)});break}case 1:{n.classList.add("brush-medium"),n.addEventListener("click",function(d){yt("medium",2,d),Ct("medium",2,d)});break}case 2:{n.classList.add("brush-big"),n.addEventListener("click",function(d){yt("big",3,d),Ct("big",3,d)});break}}e.append(n)}var a=document.createElement("div");a.className="right-panel";var o=document.createElement("div");o.className="color-select-panel",o.id="colorSelectPanel",o.addEventListener("click",function(){Yt()});var l=document.createElement("div");l.id="colorPanel",l.className="color-panel",l.style.display="none";for(var i=function(h){var g=document.createElement("div");g.className="color-item",g.addEventListener("click",function(){jn(h+1)}),g.dataset.index="".concat(h),l.append(g)},c=0;c<10;c++)i(c);a.append(l),a.append(o),a.id="rightPanel";var s=document.createElement("div");s.className="pull-down-arrow",s.addEventListener("click",function(){Yt()}),a.append(s),this.optionController.append(e),this.optionController.append(a)}},{key:"setTextInputPanel",value:function(){this.textInputController.contentEditable="true",this.textInputController.spellcheck=!1}},{key:"setAllControllerId",value:function(){this.screenShotController.id="screenShotContainer",this.toolController.id="toolPanel",this.optionIcoController.id="optionIcoController",this.optionController.id="optionPanel",this.cutBoxSizeContainer.id="cutBoxSizePanel",this.textInputController.id="textInputPanel"}},{key:"hiddenAllDom",value:function(){this.screenShotController.style.display="none",this.toolController.style.display="none",this.optionIcoController.style.display="none",this.optionController.style.display="none",this.cutBoxSizeContainer.style.display="none",this.textInputController.style.display="none"}},{key:"setDomToBody",value:function(){this.clearBody(),document.body.append(this.screenShotController),document.body.append(this.toolController),document.body.append(this.optionIcoController),document.body.append(this.optionController),document.body.append(this.cutBoxSizeContainer),document.body.append(this.textInputController)}},{key:"clearBody",value:function(){var e,r,n,a,o,l;(e=document.querySelector("#screenShotContainer"))===null||e===void 0||e.remove(),(r=document.querySelector("#toolPanel"))===null||r===void 0||r.remove(),(n=document.querySelector("#optionIcoController"))===null||n===void 0||n.remove(),(a=document.querySelector("#optionPanel"))===null||a===void 0||a.remove(),(o=document.querySelector("#optionPanel"))===null||o===void 0||o.remove(),(l=document.querySelector("#textInputPanel"))===null||l===void 0||l.remove()}},{key:"setOptionIcoClassName",value:function(){this.optionIcoController.className="ico-panel"}},{key:"filterHideIcon",value:function(e){switch(e){case"rightTop":{this.hiddenIcoArr.push("right-top");break}default:{this.hiddenIcoArr.push(e);break}}}}]),u}(),Sa=function(t,e,r){return B(t)+e>r?B(r-e):B(t)},Vt=Sa,ya=function(){for(var t=navigator.userAgent,e=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],r=!0,n=0,a=e;n<a.length;n++){var o=a[n];if(t.indexOf(o)>0){r=!1;break}}return r},Qt=ya,Ca=function(){var t="maxTouchPoints"in navigator&&navigator.maxTouchPoints>0,e="msMaxTouchPoints"in navigator&&navigator.msMaxTouchPoints>0,r="ontouchstart"in window,n=window.matchMedia&&window.matchMedia("(pointer: coarse)").matches;return t||e||r||n},wa=Ca,Pa=function(t,e){var r=e.startX,n=e.startY,a=e.width,o=e.height,l=t/2,i=[];return i[0]={x:r+l,y:n+l,width:a-t,height:o-t,index:1,option:1},i[1]={x:r+l,y:n,width:a-t,height:l,index:2,option:2},i[2]={x:r-l+a/2,y:n-l,width:t,height:l,index:2,option:2},i[3]={x:r+l,y:n-l+o,width:a-t,height:l,index:2,option:3},i[4]={x:r-l+a/2,y:n+o,width:t,height:l,index:2,option:3},i[5]={x:r,y:n+l,width:l,height:o-t,index:3,option:4},i[6]={x:r-l,y:n-l+o/2,width:l,height:t,index:3,option:4},i[7]={x:r-l+a,y:n+l,width:l,height:o-t,index:3,option:5},i[8]={x:r+a,y:n-l+o/2,width:l,height:t,index:3,option:5},i[9]={x:r-l,y:n-l,width:t,height:t,index:4,option:6},i[10]={x:r-l+a,y:n-l+o,width:t,height:t,index:4,option:7},i[11]={x:r-l+a,y:n-l,width:t,height:t,index:5,option:8},i[12]={x:r-l,y:n-l+o,width:t,height:t,index:5,option:9},i},qt=Pa,Ia=function(t,e){switch(e){case"text":{t.style.cursor="text";break}default:{t.style.cursor="default";break}}},Ea=Ia,ba=function(t,e,r,n,a,o,l){var i,c,s,d=0;switch(l){case 2:return c=e-(n+o)>0?n+o:e,d=B(o-(e-n)),{tempStartX:r,tempStartY:c,tempWidth:a,tempHeight:d};case 3:return d=B(e-n),{tempStartX:r,tempStartY:n,tempWidth:a,tempHeight:d};case 4:return i=t-(r+a)>0?r+a:t,s=B(a-(t-r)),{tempStartX:i,tempStartY:n,tempWidth:s,tempHeight:o};case 5:return s=B(t-r),{tempStartX:r,tempStartY:n,tempWidth:s,tempHeight:o};case 6:return i=t-(r+a)>0?r+a:t,c=e-(n+o)>0?n+o:e,s=B(a-(t-r)),d=B(o-(e-n)),{tempStartX:i,tempStartY:c,tempWidth:s,tempHeight:d};case 7:return s=B(t-r),d=B(e-n),{tempStartX:r,tempStartY:n,tempWidth:s,tempHeight:d};case 8:return c=e-(n+o)>0?n+o:e,s=B(t-r),d=B(o-(e-n)),{tempStartX:r,tempStartY:c,tempWidth:s,tempHeight:d};case 9:return i=t-(r+a)>0?r+a:t,s=B(a-(t-r)),d=B(e-n),{tempStartX:i,tempStartY:n,tempWidth:s,tempHeight:d};default:return c=e-(n+o)>0?n+o:e,d=B(o-(e-n)),{tempStartX:r,tempStartY:c,tempWidth:a,tempHeight:d}}},xa=ba,Ta=function(t,e,r,n,a){var o=(t.width-e)/2+(t.startX-a.left);n==="left"&&(o=t.startX),n==="right"&&(o=t.startX+t.width-e),o<0&&(o=0);var l=o+e;l>r&&(o=r-e);var i=t.startY+t.height+10;return(t.width<0&&t.height<0||t.width>0&&t.height<0)&&(i=t.startY+10),i-=a.top,{mouseX:o,mouseY:i}},ka=Ta,Da=function(){function u(){he()(this,u),S()(this,"beginPoint",{x:0,y:0}),S()(this,"stopPoint",{x:0,y:0}),S()(this,"polygonVertex",[]),S()(this,"angle",0),S()(this,"arrowInfo",{edgeLen:50,angle:30}),S()(this,"size",1)}return pe()(u,[{key:"draw",value:function(e,r,n,a,o,l,i){switch(this.beginPoint.x=r,this.beginPoint.y=n,this.stopPoint.x=a,this.stopPoint.y=o,this.arrowCord(this.beginPoint,this.stopPoint),this.sideCord(),this.drawArrow(e,l),i){case 2:{this.size=1;break}case 5:{this.size=1.3;break}case 10:{this.size=1.7;break}default:{this.size=1;break}}}},{key:"arrowCord",value:function(e,r){this.polygonVertex[0]=e.x,this.polygonVertex[1]=e.y,this.polygonVertex[6]=r.x,this.polygonVertex[7]=r.y,this.getRadian(e,r),this.polygonVertex[8]=r.x-this.arrowInfo.edgeLen*Math.cos(Math.PI/180*(this.angle+this.arrowInfo.angle)),this.polygonVertex[9]=r.y-this.arrowInfo.edgeLen*Math.sin(Math.PI/180*(this.angle+this.arrowInfo.angle)),this.polygonVertex[4]=r.x-this.arrowInfo.edgeLen*Math.cos(Math.PI/180*(this.angle-this.arrowInfo.angle)),this.polygonVertex[5]=r.y-this.arrowInfo.edgeLen*Math.sin(Math.PI/180*(this.angle-this.arrowInfo.angle))}},{key:"getRadian",value:function(e,r){this.angle=Math.atan2(r.y-e.y,r.x-e.x)/Math.PI*180,this.setArrowInfo(50*this.size,30*this.size),this.dynArrowSize()}},{key:"sideCord",value:function(){var e={x:0,y:0};e.x=(this.polygonVertex[4]+this.polygonVertex[8])/2,e.y=(this.polygonVertex[5]+this.polygonVertex[9])/2,this.polygonVertex[2]=(this.polygonVertex[4]+e.x)/2,this.polygonVertex[3]=(this.polygonVertex[5]+e.y)/2,this.polygonVertex[10]=(this.polygonVertex[8]+e.x)/2,this.polygonVertex[11]=(this.polygonVertex[9]+e.y)/2}},{key:"setArrowInfo",value:function(e,r){this.arrowInfo.edgeLen=e,this.arrowInfo.angle=r}},{key:"dynArrowSize",value:function(){var e=this.stopPoint.x-this.beginPoint.x,r=this.stopPoint.y-this.beginPoint.y,n=Math.hypot(e,r);n<50?this.arrowInfo.edgeLen=n/2:n<250?this.arrowInfo.edgeLen/=2:n<500&&(this.arrowInfo.edgeLen=this.arrowInfo.edgeLen*n/500)}},{key:"drawArrow",value:function(e,r){e.fillStyle=r,e.beginPath(),e.moveTo(this.polygonVertex[0],this.polygonVertex[1]),e.lineTo(this.polygonVertex[2],this.polygonVertex[3]),e.lineTo(this.polygonVertex[4],this.polygonVertex[5]),e.lineTo(this.polygonVertex[6],this.polygonVertex[7]),e.lineTo(this.polygonVertex[8],this.polygonVertex[9]),e.lineTo(this.polygonVertex[10],this.polygonVertex[11]),e.closePath(),e.fill()}}]),u}(),Ba=function(t,e,r,n,a,o,l){var i=e<n?e:n,c=r<a?r:a,s=e>=n?e:n,d=r>=a?r:a,h=(s-i)*.5,g=(d-c)*.5,p=i+h,y=c+g;if(t.save(),t.beginPath(),t.lineWidth=o,t.strokeStyle=l,typeof t.ellipse=="function")t.ellipse(p,y,h,g,0,0,2*Math.PI);else throw"\u4F60\u7684\u6D4F\u89C8\u5668\u4E0D\u652F\u6301ellipse\uFF0C\u65E0\u6CD5\u7ED8\u5236\u692D\u5706";t.stroke(),t.closePath(),t.restore()},Ma=Ba,Oa=function(t,e,r,n,a,o,l,i,c){var s=Math.atan2(r-a,e-n)*180/Math.PI,d=(s+o)*Math.PI/180,h=(s-o)*Math.PI/180,g=l*Math.cos(d),p=l*Math.sin(d),y=l*Math.cos(h),C=l*Math.sin(h);t.save(),t.beginPath();var m=e-g,P=r-p;t.moveTo(m,P),t.moveTo(e,r),t.lineTo(n,a),m=n+g,P=a+p,t.moveTo(m,P),t.lineTo(n,a),m=n+y,P=a+C,t.lineTo(m,P),t.strokeStyle=c,t.lineWidth=i,t.stroke(),t.restore()},Ra=Oa,Aa=function(t,e,r){var n=t.width,a=t.data,o=[];return o[0]=a[4*(r*n+e)],o[1]=a[4*(r*n+e)+1],o[2]=a[4*(r*n+e)+2],o[3]=a[4*(r*n+e)+3],o},La=function(t,e,r,n){var a=t.width,o=t.data;o[4*(r*a+e)]=n[0],o[4*(r*a+e)+1]=n[1],o[4*(r*a+e)+2]=n[2],o[4*(r*a+e)+3]=n[3]},_a=function(t,e,r,n,a){for(var o=window.devicePixelRatio||1,l=a.getImageData(t*o,e*o,r*o,r*o),i=l.width,c=l.height,s=i/n,d=c/n,h=0;h<d;h++)for(var g=0;g<s;g++)for(var p=Aa(l,g*n+Math.floor(Math.random()*n),h*n+Math.floor(Math.random()*n)),y=0;y<n;y++)for(var C=0;C<n;C++)La(l,g*n+C,h*n+y,p);a.putImageData(l,t*o,e*o)},za=_a,Wa=function(t,e,r,n,a){t.save(),t.lineWidth=n,t.strokeStyle=a,t.lineTo(e,r),t.stroke(),t.restore()},Ua=function(t,e,r){t.beginPath(),t.moveTo(e,r)},Fa=function(t,e,r,n,a,o,l){l.save(),l.strokeStyle=a,l.lineWidth=o,l.beginPath(),l.rect(t,e,r,n),l.stroke(),l.restore()},Ha=Fa,Ga=function(t,e,r){t.addEventListener("contextmenu",function(n){if(n.preventDefault(),r){r();return}e.destroyDOM(),e.setInitStatus(!0)})},Na=function(t,e,r,n,a,o){var l=document.createElement("canvas");l.width=t,l.height=e;var i=ge(l,t,e);if(i){i.drawImage(a,0,0);var c=0,s=e-n,d=r,h=e-s;return i.getImageData(c*o,s*o,d*o,h*o)}return null},Ka=function(t,e,r,n){t.addEventListener("keydown",function(a){if(e!=null&&((a.metaKey||a.ctrlKey)&&a.code==="Enter"||a.code==="Escape")){r.setTextEditState(!0);var o=t.textContent;if(!o||o===""){r.setTextStatus(!1);return}wt(o,n.mouseX,n.mouseY,r.getSelectedColor(),r.getFontSize(),e),t.innerHTML="",r.setTextStatus(!1),Pe()}})},er=function(t,e,r,n,a){if(!(r.toolController==null||r.screenShotContainer==null)){var o={code:0,data:null,msg:""},l=ka(n.drawGraphPosition,r.toolController.offsetWidth,r.screenShotContainer.width/t,n.placement,n.position),i=r.screenShotContainer.height/t;if(l.mouseY>i-64){if(l.mouseY-=n.drawGraphPosition.height+64,l.mouseY<0){var c=Number.parseInt(r.screenShotContainer.style.height);l.mouseY=c-n.fullScreenDiffHeight}e.setToolPositionStatus(!0),e.setCutBoxSizeStatus(!1)}if(n.getFullScreenStatus){var s=Number.parseInt(r.screenShotContainer.style.height),d=(n.drawGraphPosition.width/t-r.toolController.offsetWidth)/2;l.mouseY=s-n.fullScreenDiffHeight,l.mouseX=d}e.setToolInfo(l.mouseX+n.position.left,l.mouseY+n.position.top),e.setCutBoxSizePosition(n.drawGraphPosition.startX,n.drawGraphPosition.startY-35),e.setCutBoxSize(n.drawGraphPosition.width,n.drawGraphPosition.height),o.code=1,o.data=!1,a(o)}},$a=function(t,e,r){var n=new Image,a={code:0,data:null,msg:""};n.src=t,n.width=e.width,n.height=e.height,n.crossOrigin="Anonymous",n.addEventListener("load",function(){var o;(o=e.getContext("2d"))===null||o===void 0||o.drawImage(n,0,0,e.width,e.height),a.code=1,r(a)})},ja=function(t,e,r,n,a){e.setScreenShotInfo(n.width,n.height),e.setScreenShotPosition(a.left,a.top),t.width=n.width,t.height=n.height,r.canvasWidth!==0&&r.canvasHeight!==0&&(e.setScreenShotInfo(r.canvasWidth,r.canvasHeight),t.width=r.canvasWidth,t.height=r.canvasHeight)},Xa=function(t){var e,r;return!(t.nodeType===1&&(((e=t.style)===null||e===void 0?void 0:e.display)==="none"||((r=t.style)===null||r===void 0?void 0:r.opacity)==="0")||["screenShotContainer","toolPanel","optionPanel","cutBoxSizePanel","textInputPanel"].includes(t.id))},Za=function(t,e){var r=new j,n=r.getRatio();return new Promise(function(a,o){ve(e||document.body,{filter:Xa,pixelRatio:n}).then(function(l){a({code:0,data:{canvas:l}})}).catch(function(l){var i={code:-1,msg:l};t!=null&&t(i),o(i)})})},Ya=function(t,e,r,n){var a=e==null?void 0:e.width,o=e==null?void 0:e.height;t.canvasWidth!==0&&t.canvasHeight!==0&&(a=t.canvasWidth,o=t.canvasHeight);var l=a,i=o;return r&&(l=a*n,i=o*n),{containerWidth:a,containerHeight:o,imgContainerWidth:l,imgContainerHeight:i}},Ja=function(t,e,r,n,a,o,l,i){var c=t,s=n*t/r;s>e&&(c=t*e/s,s=e),c=a.w>0?a.w:c,s=a.h>0?a.h:s,o==null||o.drawImage(l,a.x,a.y,c,s);var d=e-s;if(i.state&&d>0&&i.fillState){o.beginPath();var h=t,g=d;i!=null&&i.fillWidth&&i.fillWidth>0&&(h=i.fillWidth),i!=null&&i.fillHeight&&i.fillHeight>0&&(g=i.fillHeight),o.rect(0,s,h,g),o.fillStyle=i.color||"",o.fill()}},Va=function(t,e,r){var n=t.width*e,a=t.height*e,o=!0,l={};return r&&(n=window.screen.width*e,a=window.screen.height*e,o=!1,l={displaySurface:"window"}),{audio:!1,video:x()({width:n,height:a},l),preferCurrentTab:o}},Qa=function(t,e,r,n,a,o,l,i){if(t.getToolClickStatus()&&(e.startX=o,e.startY=l),t.getToolName()==="brush"&&i.screenShotCanvas&&Ua(i.screenShotCanvas,o,l),t.getToolName()==="text"&&i.textInputController&&i.screenShotContainer&&i.screenShotCanvas){if(!r)return;if(t.setTextStatus(!0),n.mouseX!==0&&n.mouseY!==0&&n.mouseX!==o&&n.mouseY!==l){var c;wt((c=i.textInputController.textContent)!==null&&c!==void 0?c:"",n.mouseX,n.mouseY,t.getSelectedColor(),t.getFontSize(),i.screenShotCanvas),i.textInputController.textContent!==""&&t.setTextStatus(!1),i.textInputController.innerHTML="",Pe()}var s=o+a.left;i.textInputController.style.left="".concat(s,"px"),i.textInputController.style.fontSize="".concat(t.getFontSize(),"px"),i.textInputController.style.fontFamily="none",i.textInputController.style.color=t.getSelectedColor(),setTimeout(function(){if(i.textInputController){var d=i.textInputController.offsetHeight,h=l-Math.floor(d/2)+a.top;i.textInputController.style.top="".concat(h,"px"),i.textInputController.focus(),n.mouseX=o,n.mouseY=l,t.setTextInfo({positionX:o,positionY:l,color:t.getSelectedColor(),size:t.getFontSize()})}})}},qa=function(t,e,r,n,a,o,l,i,c,s,d,h,g){var p={code:0,data:null,msg:""};switch(c.getToolName()){case"square":{Ha(e,r,n,a,c.getSelectedColor(),c.getPenSize(),d.screenShotCanvas);break}case"round":{Ma(d.screenShotCanvas,o,l,e,r,c.getPenSize(),c.getSelectedColor());break}case"right-top":{if(s){Ra(d.screenShotCanvas,e,r,o,l,30,10,c.getPenSize(),c.getSelectedColor());break}new Da().draw(d.screenShotCanvas,e,r,o,l,c.getSelectedColor(),c.getPenSize());break}case"brush":{Wa(d.screenShotCanvas,o,l,c.getPenSize(),c.getSelectedColor());break}case"mosaicPen":{t||(h.showLastHistory(),p.code=1,p.data=!0,p.msg="\u9700\u8981\u66F4\u65B0\u7EC4\u4EF6\u72B6\u6001",g(p)),za(o-10,l-10,c.getMosaicPenSize(),i,d.screenShotCanvas);break}default:break}return p},tr=function(t,e,r,n,a,o,l,i,c,s,d,h){var g={code:0,msg:"",data:null};if(s.screenShotContainer!=null){var p=d.movePosition,y=p.moveStartX,C=p.moveStartY;if(d.cutOutBoxBorderArr.length>0&&!i.getDraggingTrim()){var m=!1;l.beginPath();for(var P=0;P<d.cutOutBoxBorderArr.length;P++)if(l.rect(d.cutOutBoxBorderArr[P].x,d.cutOutBoxBorderArr[P].y,d.cutOutBoxBorderArr[P].width,d.cutOutBoxBorderArr[P].height),l.isPointInPath(t*c,e*c)){switch(d.cutOutBoxBorderArr[P].index){case 1:{i.getToolClickStatus()?Ea(s.screenShotContainer,i.getActiveToolName()):s.screenShotContainer.style.cursor="move";break}case 2:{if(i.getToolClickStatus())break;s.screenShotContainer.style.cursor="ns-resize";break}case 3:{if(i.getToolClickStatus())break;s.screenShotContainer.style.cursor="ew-resize";break}case 4:{if(i.getToolClickStatus())break;s.screenShotContainer.style.cursor="nwse-resize";break}case 5:{if(i.getToolClickStatus())break;s.screenShotContainer.style.cursor="nesw-resize";break}default:break}g.code=1,g.data=d.cutOutBoxBorderArr[P].option,g.msg="\u4FEE\u6539borderOption\u7684\u503C",h(g),m=!0;break}g.code=2,g.data=m,g.msg="\u4FEE\u6539mouseInsideCropBox\u7684\u503C",h(g),l.closePath(),m||(s.screenShotContainer.style.cursor="default",g.code=3,g.data=null,g.msg="\u91CD\u7F6EborderOption\u7684\u503C",h(g))}if(i.getDraggingTrim())if(d.borderOption===1){var b=Vt(t-(y-r),a,s.screenShotContainer.width),I=Vt(e-(C-n),o,s.screenShotContainer.height),T=s.screenShotContainer.width/c,le=s.screenShotContainer.height/c,Ae=b+a,O=I+o;Ae>T&&(b=T-a),O>le&&(I=le-o),Object.assign(d.tempGraphPosition,Se(b,I,a,o,l,i.getBorderSize(),s.screenShotContainer,s.screenShotImageController))}else{var oe=xa(t,e,r,n,a,o,d.borderOption),Ie=oe.tempStartX,nr=oe.tempStartY,ye=oe.tempWidth,Pt=oe.tempHeight;Object.assign(d.tempGraphPosition,Se(Ie,nr,ye,Pt,l,i.getBorderSize(),s.screenShotContainer,s.screenShotImageController))}}},eo=function(t,e){e.screenShotContainer==null||e.toolController==null||e.textInputController==null||e.optionIcoController==null||e.optionController==null||e.cutBoxSizeContainer==null||t<=0||(e.screenShotContainer.style.zIndex="".concat(t),e.toolController.style.zIndex="".concat(t+1),e.textInputController.style.zIndex="".concat(t+1),e.optionIcoController.style.zIndex="".concat(t+1),e.optionController.style.zIndex="".concat(t+1),e.cutBoxSizeContainer.style.zIndex="".concat(t+1))},to=function(t,e,r,n,a,o){var l,i=e.x,c=e.y,s=e.w,d=e.h;n.screenShotContainer!=null&&(a.drawGraphPosition.startX=i,a.drawGraphPosition.startY=c,a.drawGraphPosition.width=s,a.drawGraphPosition.height=d,r.setCutOutBoxPosition(i,c,s,d),Se(i,c,s,d,n.screenShotCanvas,r.getBorderSize(),n.screenShotContainer,n.screenShotImageController),a.cutOutBoxBorderArr.length=0,(l=a.cutOutBoxBorderArr).push.apply(l,xt()(qt(r.getBorderSize(),a.drawGraphPosition))),n.screenShotContainer.style.cursor="move",r.setToolStatus(!0),r.setCutBoxSizeStatus(!0),n.toolController!=null&&er(t,r,{toolController:n.toolController,screenShotContainer:n.screenShotContainer},{drawGraphPosition:a.drawGraphPosition,placement:a.placement,position:a.position,fullScreenDiffHeight:a.fullScreenDiffHeight,getFullScreenStatus:a.getFullScreenStatus},o.toolBarCallerCallback))},ro=function(t,e){Qt()&&(t==null||t.addEventListener("mousedown",e.mouseDownEvent),t==null||t.addEventListener("mousemove",e.mouseMoveEvent),t==null||t.addEventListener("mouseup",e.mouseUpEvent)),wa()&&(t==null||t.addEventListener("touchstart",e.mouseDownEvent,!1),t==null||t.addEventListener("touchmove",e.mouseMoveEvent,!1),t==null||t.addEventListener("touchend",e.mouseUpEvent,!1))},no=function(t,e,r,n,a,o){if(t instanceof MediaStream)a.videoController.srcObject=t,o.loadScreenFlowData(r);else throw e!=null&&e({code:-1,msg:"\u89C6\u9891\u6D41\u63A5\u5165\u5931\u8D25"}),n.destroyDOM(),"\u89C6\u9891\u6D41\u63A5\u5165\u5931\u8D25";return t},ao=function(){var u=E()(f()().mark(function t(e,r,n,a,o){var l,i;return f()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,navigator.mediaDevices.getDisplayMedia(Va(n.screenShotImageController,a.dpr,a.wrcWindowMode));case 3:l=s.sent,n.videoController.srcObject=l,o({code:1,data:l,msg:"\u66F4\u65B0captureStream\u6570\u636E"}),s.next=14;break;case 8:throw s.prev=8,s.t0=s.catch(0),i="\u6D4F\u89C8\u5668\u4E0D\u652F\u6301webrtc\u6216\u8005\u7528\u6237\u672A\u6388\u6743",e!=null&&e({code:-1,msg:i,errorInfo:s.t0}),r.destroyDOM(),"".concat(i,"( ").concat(s.t0," )");case 14:return s.abrupt("return",l);case 15:case"end":return s.stop()}},t,null,[[0,8]])}));return function(e,r,n,a,o){return u.apply(this,arguments)}}(),oo=function(t){var e=t.srcObject;if(e&&"getTracks"in e){var r=e.getTracks();r.forEach(function(n){return n.stop()}),t.srcObject=null}},lo=function(t,e,r,n,a){if(!Qt()&&t instanceof TouchEvent&&r.screenShotCanvas&&tr(t.touches[0].pageX,t.touches[0].pageY,n.tempGraphPosition.startX,n.tempGraphPosition.startY,n.tempGraphPosition.width,n.tempGraphPosition.height,r.screenShotCanvas,e,n.dpr,{screenShotContainer:r.screenShotContainer,screenShotImageController:r.screenShotImageController},{movePosition:n.movePosition,tempGraphPosition:n.tempGraphPosition,cutOutBoxBorderArr:n.cutOutBoxBorderArr,borderOption:n.borderOption},a.croppingBoxCallerCallback),e.getToolName()!=="undo"){e.setDragging(!0),e.setToolPositionStatus(!1);var o=B(t instanceof MouseEvent?t.offsetX:t.touches[0].pageX),l=B(t instanceof MouseEvent?t.offsetY:t.touches[0].pageY);Qa(e,n.drawGraphPosition,n.mouseInsideCropBox,n.textInputPosition,n.position,o,l,{textInputController:r.textInputController,screenShotContainer:r.screenShotContainer,screenShotCanvas:r.screenShotCanvas}),n.borderOption?(e.setDraggingTrim(!0),n.movePosition.moveStartX=o,n.movePosition.moveStartY=l):(a.saveDrawGraphCallerCallback({code:1,msg:"\u4FDD\u5B58\u5F53\u524D\u88C1\u526A\u6846\u7684\u5750\u6807",data:{drawGraphPrevX:n.drawGraphPosition.startX,drawGraphPrevY:n.drawGraphPosition.startY}}),n.drawGraphPosition.startX=o,n.drawGraphPosition.startY=l)}},mo=function(t,e,r,n,a){!e.getToolClickStatus()&&e.getDragging()&&(a.updateDragFlagCallback({code:1,msg:"\u66F4\u65B0\u62D6\u52A8\u72B6\u6001",data:!0}),e.setToolStatus(!1),e.setCutBoxSizeStatus(!1));var o=n.drawGraphPosition,l=o.startX,i=o.startY,c=o.width,s=o.height,d=nonNegativeData(t instanceof MouseEvent?t.offsetX:t.touches[0].pageX),h=nonNegativeData(t instanceof MouseEvent?t.offsetY:t.touches[0].pageY),g=d-l,p=h-i;if(e.getToolClickStatus()&&e.getDragging()){var y=e.getCutOutBoxPosition();if(!getDrawBoundaryStatus(l,i,y)||!getDrawBoundaryStatus(d,h,y))return;e.getToolName()!=="mosaicPen"&&(a.showLastHistory(),a.updateDrawStatusCallback({code:1,msg:"\u66F4\u65B0\u7ED8\u5236\u72B6\u6001",data:!0}));var C=function(b){b.code===1&&b.data!=null&&typeof b.data=="boolean"&&a.updateDrawStatusCallback({code:1,msg:"\u66F4\u65B0\u7ED8\u5236\u72B6\u6001",data:b.data})};handleGraffitiDraw(n.drawStatus,l,i,g,p,d,h,n.degreeOfBlur,e,n.useRatioArrow,{screenShotCanvas:r.screenShotCanvas},{showLastHistory:a.showLastHistory},C);return}if(operatingCutOutBox(d,h,l,i,c,s,r.screenShotCanvas,e,n.dpr,{screenShotContainer:r.screenShotContainer,screenShotImageController:r.screenShotImageController},{movePosition:n.movePosition,tempGraphPosition:n.tempGraphPosition,cutOutBoxBorderArr:n.cutOutBoxBorderArr,borderOption:n.borderOption},a.croppingBoxCallerCallback),!(!e.getDragging()||e.getDraggingTrim())){var m=drawCutOutBox(l,i,g,p,r.screenShotCanvas,e.getBorderSize(),r.screenShotContainer,r.screenShotImageController);a.updateTempGraphPositionCallback({code:1,msg:"\u66F4\u65B0tempGraphPosition\u7684\u503C",data:m})}},io=function(t,e,r,n){if(!t.getToolClickStatus()&&!e.dragFlag&&!e.clickCutFullScreen){e.drawGraphPosition.startX=e.drawGraphPrevX,e.drawGraphPosition.startY=e.drawGraphPrevY;return}var a=t.getCutOutBoxPosition();if(a.width===0&&a.height===0&&a.startX===0&&a.startY===0&&!e.dragFlag&&e.clickCutFullScreen){var o=t.getBorderSize();n.updateTempGraphPositionCallback({code:1,msg:"\u66F4\u65B0getFullScreenStatus\u4E0EtempGraphPosition",data:{getFullScreenStatus:!0,tempGraphPosition:Se(0,0,r.screenShotContainer.width-o/2,r.screenShotContainer.height-o/2,r.screenShotCanvas,o,r.screenShotContainer,r.screenShotImageController)}})}if(!(r.screenShotContainer==null||r.screenShotCanvas==null)){if(t.getToolClickStatus()&&e.drawStatus){Pe();return}else if(t.getToolClickStatus()&&!e.drawStatus)return;if(Object.assign(e.drawGraphPosition,e.tempGraphPosition),!t.getToolClickStatus()){var l=e.drawGraphPosition,i=l.startX,c=l.startY,s=l.width,d=l.height;t.setCutOutBoxPosition(i,c,s,d)}Object.assign(e.cutOutBoxBorderArr,qt(t.getBorderSize(),e.drawGraphPosition)),(r.screenShotContainer!=null&&e.dragFlag||e.clickCutFullScreen)&&(r.screenShotContainer.style.cursor="move",t.setToolStatus(!0),t.setCutBoxSizeStatus(!0),n.updateDrawStatusCallback({code:1,msg:"\u66F4\u65B0dragFlag",data:!1}),r.toolController!=null&&er(e.dpr,t,{toolController:r.toolController,screenShotContainer:r.screenShotContainer},{drawGraphPosition:e.drawGraphPosition,placement:e.placement,position:e.position,fullScreenDiffHeight:e.fullScreenDiffHeight,getFullScreenStatus:e.getFullScreenStatus},n.toolBarCallerCallback))}},so=function(t,e,r){return!(t<r.startX||e<r.startY||t>r.startX+r.width||e>r.startY+r.height)},rr=so,uo=function(t,e){var r=new j,n=new j,a=n.getCanvasSize(),o={width:Number.parseFloat(window.getComputedStyle(document.body).width),height:Number.parseFloat(window.getComputedStyle(document.body).height)},l=Math.max(o.width||0,Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),Math.max(document.body.offsetWidth,document.documentElement.offsetWidth),Math.max(document.body.clientWidth,document.documentElement.clientWidth)),i=Math.max(o.height||0,Math.max(document.body.scrollHeight,document.documentElement.scrollHeight),Math.max(document.body.offsetHeight,document.documentElement.offsetHeight),Math.max(document.body.clientHeight,document.documentElement.clientHeight));t.clearRect(0,0,l,i),e!=null&&n.getShowScreenDataStatus()&&(a.canvasWidth!==0&&a.canvasHeight!==0?t.drawImage(e,0,0,a.canvasWidth,a.canvasHeight):t.drawImage(e,0,0,l,i)),t.save();var c=r.getMaskColor();t.fillStyle="rgba(0, 0, 0, .6)",c&&(t.fillStyle="rgba(".concat(c.r,", ").concat(c.g,", ").concat(c.b,", ").concat(c.a,")")),a.canvasWidth!==0&&a.canvasHeight!==0?t.fillRect(0,0,a.canvasWidth,a.canvasHeight):t.fillRect(0,0,l,i),t.restore()},co=uo,vo=function(){function u(t,e){var r=this;he()(this,u),S()(this,"toolController",null);var n=new F,a=document.querySelector("#textInputPanel");this.toolController=e,t.tabIndex=99998,document.body.addEventListener("keydown",function(o){if(n.getTextEditState()){n.setTextEditState(!1);return}o.code==="Escape"&&r.triggerEvent("close"),o.code==="Enter"&&a&&a.style.display!=="block"&&r.triggerEvent("confirm"),(o.metaKey||o.ctrlKey)&&o.code==="KeyZ"&&r.triggerEvent("undo")})}return pe()(u,[{key:"triggerEvent",value:function(e){if(this.toolController!=null)for(var r=0;r<this.toolController.childNodes.length;r++){var n=this.toolController.childNodes[r],a=n.dataset.title;a===e&&n.click()}}}]),u}(),ho=function(t){var e=new j;(t==null?void 0:t.enableWebRtc)===!1&&(e.setWebRtcStatus(!1),e.setInitStatus(!1)),(t==null?void 0:t.screenFlow)instanceof MediaStream&&e.setScreenFlow(t.screenFlow),t!=null&&t.canvasWidth&&t!==null&&t!==void 0&&t.canvasHeight&&e.setCanvasSize(t.canvasWidth,t.canvasHeight),(t==null?void 0:t.showScreenData)===!0&&e.setShowScreenDataStatus(!0),t!=null&&t.maskColor&&We()(t.maskColor)==="object"&&e.setMaskColor(t.maskColor),(t==null?void 0:t.writeBase64)===!1&&e.setWriteImgState(t.writeBase64),t!=null&&t.screenShotDom&&e.setScreenShotDom(t.screenShotDom),t!=null&&t.cutBoxBdColor&&e.setCutBoxBdColor(t.cutBoxBdColor),t!=null&&t.saveCallback&&e.setSaveCallback(t.saveCallback),t!=null&&t.maxUndoNum&&e.setMaxUndoNum(t.maxUndoNum),t!=null&&t.useRatioArrow&&e.setRatioArrow(t.useRatioArrow),t!=null&&t.imgAutoFit&&e.setImgAutoFit(t.imgAutoFit),t!=null&&t.saveImgTitle&&e.setSaveImgTitle(t.saveImgTitle),t!=null&&t.ratio&&e.setRatio(t.ratio)},po=ho,go=function(){function u(t){var e=this;he()(this,u),S()(this,"data",void 0),S()(this,"videoController",void 0),S()(this,"screenShotContainer",void 0),S()(this,"screenShotDom",null),S()(this,"toolController",void 0),S()(this,"screenShotImageController",void 0),S()(this,"screenShotCanvas",void 0),S()(this,"textInputController",void 0),S()(this,"optionController",void 0),S()(this,"optionIcoController",void 0),S()(this,"cutBoxSizeContainer",void 0),S()(this,"plugInParameters",void 0),S()(this,"wrcReplyTime",500),S()(this,"keyboardEventHandle",null),S()(this,"drawGraphPosition",{startX:0,startY:0,width:0,height:0}),S()(this,"tempGraphPosition",{startX:0,startY:0,width:0,height:0}),S()(this,"wrcImgPosition",{x:0,y:0,w:0,h:0}),S()(this,"hiddenScrollBar",{color:"#000000",fillState:!1,state:!1,fillWidth:0,fillHeight:0}),S()(this,"wrcWindowMode",!1),S()(this,"cutOutBoxBorderArr",[]),S()(this,"borderOption",null),S()(this,"movePosition",{moveStartX:0,moveStartY:0}),S()(this,"dragFlag",!1),S()(this,"clickCutFullScreen",!1),S()(this,"getFullScreenStatus",!1),S()(this,"drawGraphPrevX",0),S()(this,"drawGraphPrevY",0),S()(this,"degreeOfBlur",5),S()(this,"dpr",window.devicePixelRatio||1),S()(this,"fullScreenDiffHeight",60),S()(this,"position",{left:0,top:0}),S()(this,"imgSrc",null),S()(this,"mouseInsideCropBox",!1),S()(this,"drawStatus",!1),S()(this,"captureStream",null),S()(this,"cropBoxInfo",null),S()(this,"textInputPosition",{mouseX:0,mouseY:0}),S()(this,"placement","center"),S()(this,"customRightClickEvent",{state:!1}),S()(this,"wrcScreenShot",function(l,i){document.body.classList.add("no-cursor");var c=function(d){d.code===1&&d.data instanceof MediaStream&&(e.captureStream=d.data)};ao(l,e.data,{screenShotImageController:e.screenShotImageController,videoController:e.videoController},{dpr:e.dpr,wrcWindowMode:e.wrcWindowMode},c).then(function(){e.loadScreenFlowData(i)})}),S()(this,"mouseDownEvent",function(l){if(e.drawStatus=!1,e.data.setColorPanelStatus(!1),e.data.setTextSizeOptionStatus(!1),!(l instanceof MouseEvent&&l.button!==0)){var i=function(s){s.code===1&&s.data!=null&&(e.drawGraphPrevX=s.data.startX,e.drawGraphPrevY=s.data.startY)};lo(l,e.data,{screenShotCanvas:e.screenShotCanvas,screenShotContainer:e.screenShotContainer,screenShotImageController:e.screenShotImageController,textInputController:e.textInputController},{tempGraphPosition:e.tempGraphPosition,dpr:e.dpr,movePosition:e.movePosition,cutOutBoxBorderArr:e.cutOutBoxBorderArr,borderOption:e.borderOption,drawGraphPosition:e.drawGraphPosition,mouseInsideCropBox:e.mouseInsideCropBox,textInputPosition:e.textInputPosition,position:e.position},{croppingBoxCallerCallback:e.croppingBoxCallerCallback,saveDrawGraphCallerCallback:i})}}),S()(this,"mouseMoveEvent",function(l){if(!(e.screenShotCanvas==null||e.screenShotContainer==null||e.data.getToolName()==="undo")){l.preventDefault(),!e.data.getToolClickStatus()&&e.data.getDragging()&&(e.dragFlag=!0,e.data.setToolStatus(!1),e.data.setCutBoxSizeStatus(!1));var i=e.drawGraphPosition,c=i.startX,s=i.startY,d=i.width,h=i.height,g=B(l instanceof MouseEvent?l.offsetX:l.touches[0].pageX),p=B(l instanceof MouseEvent?l.offsetY:l.touches[0].pageY),y=g-c,C=p-s;if(e.data.getToolClickStatus()&&e.data.getDragging()){var m=e.data.getCutOutBoxPosition();if(!rr(c,s,m)||!rr(g,p,m))return;e.data.getToolName()!=="mosaicPen"&&(e.showLastHistory(),e.drawStatus=!0);var P=function(I){I.code===1&&I.data!=null&&typeof I.data=="boolean"&&(e.drawStatus=I.data)};qa(e.drawStatus,c,s,y,C,g,p,e.degreeOfBlur,e.data,e.plugInParameters.getRatioArrow(),{screenShotCanvas:e.screenShotCanvas},{showLastHistory:e.showLastHistory},P);return}tr(g,p,c,s,d,h,e.screenShotCanvas,e.data,e.dpr,{screenShotContainer:e.screenShotContainer,screenShotImageController:e.screenShotImageController},{movePosition:e.movePosition,tempGraphPosition:e.tempGraphPosition,cutOutBoxBorderArr:e.cutOutBoxBorderArr,borderOption:e.borderOption},e.croppingBoxCallerCallback),!(!e.data.getDragging()||e.data.getDraggingTrim())&&(e.tempGraphPosition=Se(c,s,y,C,e.screenShotCanvas,e.data.getBorderSize(),e.screenShotContainer,e.screenShotImageController))}}),S()(this,"mouseUpEvent",function(){if(e.data.getToolName()!=="undo"&&(e.data.setDragging(!1),e.data.setDraggingTrim(!1),!(e.screenShotCanvas==null||e.screenShotContainer==null))){var l=function(s){if(s.code===1&&s.data!=null){var d=s.data,h=d.getFullScreenStatus,g=d.tempGraphPosition;e.getFullScreenStatus=h,e.tempGraphPosition=g}},i=function(s){s.code===1&&typeof s.data=="boolean"&&(e.drawStatus=s.data)};io(e.data,{dragFlag:e.dragFlag,drawStatus:e.drawStatus,clickCutFullScreen:e.clickCutFullScreen,drawGraphPosition:e.drawGraphPosition,cutOutBoxBorderArr:e.cutOutBoxBorderArr,drawGraphPrevX:e.drawGraphPrevX,drawGraphPrevY:e.drawGraphPrevY,tempGraphPosition:e.tempGraphPosition,placement:e.placement,position:e.position,fullScreenDiffHeight:e.fullScreenDiffHeight,getFullScreenStatus:e.getFullScreenStatus,dpr:e.dpr},{screenShotCanvas:e.screenShotCanvas,screenShotContainer:e.screenShotContainer,screenShotImageController:e.screenShotImageController,toolController:e.toolController},{toolBarCallerCallback:e.toolBarCallerCallback,updateTempGraphPositionCallback:l,updateDrawStatusCallback:i})}}),S()(this,"croppingBoxCallerCallback",function(l){var i=l.code,c=l.data;i===1&&typeof c=="number"&&(e.borderOption=c),i===2&&typeof c=="boolean"&&(e.mouseInsideCropBox=c),i===3&&We()(c)===null&&(e.borderOption=null)}),S()(this,"toolBarCallerCallback",function(l){l.code===1&&typeof l.data=="boolean"&&(e.getFullScreenStatus=l.data)}),this.plugInParameters=new j,po(t),new ma(t),this.videoController=document.createElement("video"),this.videoController.autoplay=!0,this.screenShotImageController=document.createElement("canvas"),this.data=new F,this.setOptionalParameter(t);var r=t.noScroll,n=t.triggerCallback,a=t.cancelCallback,o=t.level;this.setGlobalParameter(),this.data.setNoScrollStatus(r),this.load(n,a).then(function(){e.toolController==null||e.screenShotContainer==null||e.textInputController==null||(eo(o||0,{screenShotContainer:e.screenShotContainer,toolController:e.toolController,textInputController:e.textInputController,optionIcoController:e.optionIcoController,optionController:e.optionController,cutBoxSizeContainer:e.cutBoxSizeContainer}),e.createEvent(e.screenShotContainer,e.toolController,e.textInputController))})}return pe()(u,[{key:"getCanvasController",value:function(){return this.screenShotContainer}},{key:"destroyComponents",value:function(){this.data.destroyDOM(),this.data.setInitStatus(!0)}},{key:"completeScreenshot",value:function(){this.keyboardEventHandle&&this.keyboardEventHandle.triggerEvent("confirm")}},{key:"load",value:function(){var t=E()(f()().mark(function r(n,a){var o=this,l,i,c,s,d,h;return f()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(l=this.plugInParameters.getCanvasSize(),i={width:Number.parseFloat(window.getComputedStyle(document.body).width),height:Number.parseFloat(window.getComputedStyle(document.body).height)},ja(this.screenShotImageController,this.data,l,i,this.position),this.screenShotContainer!=null){p.next=5;break}return p.abrupt("return");case 5:if(c=ge(this.screenShotContainer,this.screenShotImageController.width,this.screenShotImageController.height),c!=null){p.next=8;break}return p.abrupt("return");case 8:if(this.data.showScreenShotPanel(),this.plugInParameters.getWebRtcStatus()){p.next=19;break}if(this.imgSrc==null){p.next=14;break}return s=function(C){C.code===1&&C.data==null&&o.initScreenShot(n,c,o.screenShotImageController)},$a(this.imgSrc,this.screenShotImageController,s),p.abrupt("return");case 14:return p.next=16,Za(n,this.screenShotDom);case 16:return d=p.sent,d.code===0&&(h=d.data.canvas,this.screenShotImageController=h,this.initScreenShot(n,c,h)),p.abrupt("return");case 19:if(!this.plugInParameters.getScreenFlow()){p.next=22;break}return no(this.plugInParameters.getScreenFlow(),a,n,this.data,{videoController:this.videoController},{loadScreenFlowData:this.loadScreenFlowData}),p.abrupt("return");case 22:this.wrcScreenShot(a,n);case 23:case"end":return p.stop()}},r,this)}));function e(r,n){return t.apply(this,arguments)}return e}()},{key:"loadScreenFlowData",value:function(e){var r=this;setTimeout(function(){if(r.screenShotContainer!=null){var n=Ya(r.plugInParameters.getCanvasSize(),r.screenShotImageController,r.wrcWindowMode,r.dpr),a=n.containerWidth,o=n.containerHeight,l=n.imgContainerWidth,i=n.imgContainerHeight,c=ge(r.screenShotContainer,a,o),s=ge(r.screenShotImageController,l,i);if(!(c==null||s==null)){r.screenShotCanvas=c;var d=r.videoController,h=d.videoWidth,g=d.videoHeight;if(r.wrcWindowMode){var p=Na(h,g,a*r.dpr,o*r.dpr,r.videoController,r.dpr);if(p==null)return;s.putImageData(p,0,0)}else Ja(a,o,h,g,r.wrcImgPosition,s,r.videoController,r.hiddenScrollBar);r.initScreenShot(void 0,c,r.screenShotImageController);var y="",C="";if(r.captureStream){var m,P;y=(m=(P=r.captureStream.getVideoTracks()[0].getSettings())===null||P===void 0?void 0:P.displaySurface)!==null&&m!==void 0?m:"",C=r.captureStream.getVideoTracks()[0].label}e&&e({code:0,msg:"\u622A\u56FE\u52A0\u8F7D\u5B8C\u6210",displaySurface:y,displayLabel:C}),oo(r.videoController),document.body.classList.remove("no-cursor")}}},this.wrcReplyTime)}},{key:"initScreenShot",value:function(e,r,n){e!=null&&e({code:0,msg:"\u622A\u56FE\u52A0\u8F7D\u5B8C\u6210"}),this.screenShotCanvas=r,this.data.setScreenShotImageController(n),co(r,n),ro(this.screenShotContainer,{mouseDownEvent:this.mouseDownEvent,mouseMoveEvent:this.mouseMoveEvent,mouseUpEvent:this.mouseUpEvent}),this.cropBoxInfo!=null&&Object.keys(this.cropBoxInfo).length===4&&to(this.dpr,this.cropBoxInfo,this.data,{screenShotContainer:this.screenShotContainer,screenShotImageController:this.screenShotImageController,screenShotCanvas:this.screenShotCanvas,toolController:this.toolController},{drawGraphPosition:this.drawGraphPosition,cutOutBoxBorderArr:this.cutOutBoxBorderArr,placement:this.placement,position:this.position,fullScreenDiffHeight:this.fullScreenDiffHeight,getFullScreenStatus:this.getFullScreenStatus},{toolBarCallerCallback:this.toolBarCallerCallback})}},{key:"showLastHistory",value:function(){if(this.screenShotCanvas!=null){var e=this.screenShotCanvas;this.data.getHistory().length<=0&&Pe(),e.putImageData(this.data.getHistory()[this.data.getHistory().length-1].data,0,0)}}},{key:"setGlobalParameter",value:function(){this.screenShotContainer=this.data.getScreenShotContainer(),this.toolController=this.data.getToolController(),this.textInputController=this.data.getTextInputController(),this.optionController=this.data.getOptionController(),this.optionIcoController=this.data.getOptionIcoController(),this.cutBoxSizeContainer=this.data.getCutBoxSizeContainer()}},{key:"setOptionalParameter",value:function(e){if((e==null?void 0:e.clickCutFullScreen)===!0&&(this.clickCutFullScreen=!0),(e==null?void 0:e.imgSrc)!=null&&(this.imgSrc=e.imgSrc),(e==null?void 0:e.position)!=null){var r,n;((r=e.position)===null||r===void 0?void 0:r.top)!=null&&(this.position.top=e.position.top),((n=e.position)===null||n===void 0?void 0:n.left)!=null&&(this.position.left=e.position.left)}if(e!=null&&e.screenShotDom&&(this.screenShotDom=e.screenShotDom),e!=null&&e.wrcReplyTime&&(this.wrcReplyTime=e.wrcReplyTime),e!=null&&e.cropBoxInfo&&(this.cropBoxInfo=e.cropBoxInfo),e!=null&&e.toolPosition&&(this.placement=e.toolPosition),e!=null&&e.wrcImgPosition){var a=e.wrcImgPosition,o=a.x,l=a.y;this.wrcImgPosition.x=Math.abs(o)*-1,this.wrcImgPosition.y=Math.abs(l)*-1}if((e==null?void 0:e.hiddenScrollBar)!=null){var i=e.hiddenScrollBar,c=i.state,s=i.color,d=i.fillWidth,h=i.fillHeight,g=i.fillState;this.hiddenScrollBar={state:c,color:s||"#000000",fillWidth:d||0,fillHeight:h||0,fillState:g||!1},c&&(this.data.setResetScrollbarState(!0),document.documentElement.classList.add("hidden-screen-shot-scroll"),document.body.classList.add("hidden-screen-shot-scroll"))}(e==null?void 0:e.wrcWindowMode)!=null&&(this.wrcWindowMode=e.wrcWindowMode),(e==null?void 0:e.customRightClickEvent)!=null&&(this.customRightClickEvent=e.customRightClickEvent)}},{key:"createEvent",value:function(e,r,n){this.keyboardEventHandle=new vo(e,r),Ka(n,this.screenShotCanvas,this.data,this.textInputPosition),this.customRightClickEvent.state&&Ga(e,this.data,this.customRightClickEvent.handleFn)}}]),u}()},1089:function(L,w,v){"use strict";v.r(w),v.d(w,{texts:function(){return x}});var k=v(29425);const x=[{value:`// AES\u52A0\u5BC6\u914D\u7F6E
interface AESConfigType {
  // \u5BC6\u94A5\u504F\u79FB\u91CF\uFF0C16\u4F4Dhex\u5B57\u7B26\u4E32
  iv: string;
  // \u52A0\u5BC6\u6A21\u5F0F
  mode: 'CBC' | 'CFB' | 'CTR' | 'CTRGladman' | 'ECB' | 'OFB';
  // \u586B\u5145\u65B9\u6CD5
  padding: 'AnsiX923' | 'Iso10126' | 'Iso97971' | 'NoPadding' | 'Pkcs7' | 'ZeroPadding';
}

// \u52A0\u5BC6
cryptoAES.encrypt(value: string, key: string, AEScfg?: AESConfigType);
// \u89E3\u5BC6
cryptoAES.decrypt(value: string, key: string, AEScfg?: AESConfigType);
`,paraId:0,tocIndex:2},{value:"\u53C2\u6570",paraId:1,tocIndex:3},{value:"\u8BF4\u660E",paraId:1,tocIndex:3},{value:"\u7C7B\u578B",paraId:1,tocIndex:3},{value:"value",paraId:1,tocIndex:3},{value:"\u9700\u8981\u52A0\u5BC6\u89E3\u5BC6\u7684\u6570\u636E",paraId:1,tocIndex:3},{value:"any",paraId:1,tocIndex:3},{value:"key",paraId:1,tocIndex:3},{value:"\u5BC6\u94A5",paraId:1,tocIndex:3},{value:"string",paraId:1,tocIndex:3},{value:"AEScfg",paraId:1,tocIndex:3},{value:"AES \u52A0\u5BC6\u7684\u914D\u7F6E\u9879",paraId:1,tocIndex:3},{value:"AESConfigType",paraId:1,tocIndex:3},{value:"\u53C2\u6570",paraId:2,tocIndex:4},{value:"\u8BF4\u660E",paraId:2,tocIndex:4},{value:"\u7C7B\u578B",paraId:2,tocIndex:4},{value:"\u9ED8\u8BA4\u503C",paraId:2,tocIndex:4},{value:"iv",paraId:2,tocIndex:4},{value:"\u5BC6\u94A5\u504F\u79FB\u91CF",paraId:2,tocIndex:4},{value:"string",paraId:2,tocIndex:4},{value:"0000000000000000",paraId:2,tocIndex:4},{value:"mode",paraId:2,tocIndex:4},{value:"\u52A0\u5BC6\u6A21\u5F0F",paraId:2,tocIndex:4},{value:"CBC",paraId:2,tocIndex:4},{value:"\u3001",paraId:2,tocIndex:4},{value:"CFB",paraId:2,tocIndex:4},{value:"\u3001",paraId:2,tocIndex:4},{value:"CTR",paraId:2,tocIndex:4},{value:"\u3001",paraId:2,tocIndex:4},{value:"CTRGladman",paraId:2,tocIndex:4},{value:"\u3001",paraId:2,tocIndex:4},{value:"ECB",paraId:2,tocIndex:4},{value:"\u3001",paraId:2,tocIndex:4},{value:"OFB",paraId:2,tocIndex:4},{value:"CBC",paraId:2,tocIndex:4},{value:"padding",paraId:2,tocIndex:4},{value:"\u586B\u5145\u65B9\u5F0F",paraId:2,tocIndex:4},{value:"Pkcs7",paraId:2,tocIndex:4},{value:"\u3001",paraId:2,tocIndex:4},{value:"AnsiX923",paraId:2,tocIndex:4},{value:"\u3001",paraId:2,tocIndex:4},{value:"Iso10126",paraId:2,tocIndex:4},{value:"\u3001",paraId:2,tocIndex:4},{value:"Iso97971",paraId:2,tocIndex:4},{value:"\u3001",paraId:2,tocIndex:4},{value:"NoPadding",paraId:2,tocIndex:4},{value:"\u3001",paraId:2,tocIndex:4},{value:"ZeroPadding",paraId:2,tocIndex:4},{value:"Pkcs7",paraId:2,tocIndex:4},{value:"(string):\u8FD4\u56DE\u52A0\u5BC6\u6216\u89E3\u5BC6\u8FC7\u7684\u6570\u636E\u3002",paraId:3,tocIndex:5}]},21826:function(L,w,v){"use strict";v.r(w),v.d(w,{texts:function(){return x}});var k=v(2597);const x=[{value:`// \u52A0\u5BC6
cryptoBase64.encrypt(value: string);
// \u89E3\u5BC6
cryptoBase64.decrypt(value: string);
`,paraId:0,tocIndex:2},{value:"\u53C2\u6570",paraId:1,tocIndex:3},{value:"\u8BF4\u660E",paraId:1,tocIndex:3},{value:"\u7C7B\u578B",paraId:1,tocIndex:3},{value:"value",paraId:1,tocIndex:3},{value:"\u9700\u8981\u52A0\u5BC6\u89E3\u5BC6\u7684\u6570\u636E",paraId:1,tocIndex:3},{value:"string",paraId:1,tocIndex:3},{value:"(string):\u8FD4\u56DE\u52A0\u5BC6\u6216\u89E3\u5BC6\u8FC7\u7684\u6570\u636E\u3002",paraId:2,tocIndex:4}]},19355:function(L,w,v){"use strict";v.r(w),v.d(w,{texts:function(){return x}});var k=v(51461);const x=[]},75877:function(L,w,v){"use strict";v.r(w),v.d(w,{texts:function(){return x}});var k=v(52626);const x=[{value:"\u62E6\u622A\u4E86 error\uFF0C\u5BF9 error \u7684\u6570\u636E\u505A\u4E86\u5904\u7406\u3002\u7528\u4E8E\u7EDF\u4E00\u5168\u5C40\u8BF7\u6C42\u62A5\u9519\u3002",paraId:0,tocIndex:0},{value:`import { request } from '@zpcscc/thirdparty';

interface ErrorMessageType {
  error: AxiosError;
  // \u9ED8\u8BA4\u8FD4\u56DE\u4FE1\u606F
  response?: AxiosResponse<any>;
  // \u72B6\u6001\u7801
  status?: keyof typeof codeMessage;
  // \u62A5\u9519\u8FD4\u56DE\u7684\u63D0\u793A\u5185\u5BB9
  message: string;
  // \u81EA\u5B9A\u4E49\u72B6\u6001\u7801\u63D0\u793A
  codeMessage: string;
  // \u7CFB\u7EDF\u9ED8\u8BA4\u72B6\u6001\u7801\u63D0\u793A
  statusText?: string;
}

request
  .get('url')
  .then(resolve)
  .catch((error:ErrorMessageType) => reject(error));
`,paraId:1,tocIndex:0}]},34966:function(L,w,v){"use strict";v.r(w),v.d(w,{texts:function(){return x}});var k=v(50823);const x=[{value:"\u57FA\u4E8E",paraId:0,tocIndex:0},{value:"html-to-image",paraId:0,tocIndex:0},{value:` \u4FEE\u6539\u540E\u7684\u622A\u5C4F\u5E93\uFF1B
\u878D\u5408\u4E86`,paraId:0,tocIndex:0},{value:"modern-screenshot",paraId:0,tocIndex:0},{value:"\u7684\u90E8\u5206\u4EE3\u7801\uFF0C\u7528\u4E8E\u5904\u7406ios\u4E0B\uFF0C\u622A\u5C4F\u5076\u5C14\u7A7A\u767D\u7684\u95EE\u9898\u3002",paraId:0,tocIndex:0}]},21234:function(L,w,v){"use strict";v.r(w),v.d(w,{texts:function(){return x}});var k=v(95732);const x=[{value:"\u57FA\u4E8E",paraId:0,tocIndex:0},{value:"js-screen-shot",paraId:0,tocIndex:0},{value:" \u5C06\u5185\u7F6E\u622A\u5C4F\u5E93\uFF0C\u4ECEhtml2canvas\u66FF\u6362\u4E3A\u4E86html-to-image\uFF0C\u4FEE\u6539\u540E\u7684\u591A\u529F\u80FD\u622A\u5C4F\u5DE5\u5177\uFF1B",paraId:0,tocIndex:0}]},62683:function(L,w){"use strict";w.Z=`import { LeftOutlined, RightOutlined } from '@ant-design/icons';
import { cryptoAES, type AESConfigType } from '@zpcscc/thirdparty';
import { toString } from '@zpcscc/utils';
import { Button, Input, Radio, Space } from 'antd';
import { useState, type FC } from 'react';

const AES: FC = () => {
  // \u5F85\u52A0\u5BC6\u6570\u636E
  const [encryptValue, setEncryptValue] = useState<string>('');
  // \u5F85\u89E3\u5BC6\u6570\u636E
  const [decryptValue, setDecryptValue] = useState<string>('');
  // \u5BC6\u94A5
  const [key, setKey] = useState<string>('1111111111111111');
  // \u5BC6\u94A5\u504F\u79FB\u91CF
  const [iv, setIv] = useState<string>('0000000000000000');
  // \u52A0\u5BC6\u6A21\u5F0F
  const [mode, setMode] = useState<AESConfigType['mode']>('CBC');
  // \u586B\u5145\u65B9\u5F0F
  const [padding, setPadding] = useState<AESConfigType['padding']>('Pkcs7');
  // aes\u52A0\u5BC6\u914D\u7F6E\uFF0C\u53EF\u9009\u9879
  const aesConfig = { iv, mode, padding };

  // \u52A0\u5BC6
  const onEncrypt = () => {
    console.log('jiam');
    setDecryptValue(cryptoAES.encrypt(encryptValue, key, aesConfig));
  };

  // \u89E3\u5BC6
  const onDecrypt = () => {
    setEncryptValue(cryptoAES.decrypt(decryptValue, key, aesConfig));
  };

  return (
    <Space direction='vertical' wrap>
      <Space direction='vertical' wrap>
        <Input
          style={{ width: '300px' }}
          placeholder={'\u8BF7\u8F93\u5165\u5BC6\u94A5'}
          addonBefore='\u5BC6\u94A5'
          maxLength={16}
          value={key}
          onChange={({ target: { value } }) => setKey(value)}
        />
        <Input
          style={{ width: '300px' }}
          placeholder={'\u8BF7\u8F93\u5165\u5BC6\u94A5\u504F\u79FB\u91CF'}
          addonBefore='\u5BC6\u94A5\u504F\u79FB\u91CF'
          maxLength={16}
          value={iv}
          onChange={({ target: { value } }) => setIv(value)}
        />
        <Space wrap>
          \u52A0\u5BC6\u6A21\u5F0F\uFF1A\uFF08\u9ED8\u8BA4\uFF1ACBC\uFF09
          <Radio.Group
            options={[
              { label: 'CBC', value: 'CBC' },
              { label: 'CFB', value: 'CFB' },
              { label: 'CTR', value: 'CTR' },
              { label: 'CTRGladman', value: 'CTRGladman' },
              { label: 'ECB', value: 'ECB' },
              { label: 'OFB', value: 'OFB' }
            ]}
            onChange={({ target: { value } }) => setMode(value)}
            value={mode}
            optionType='button'
            buttonStyle='solid'
          />
        </Space>
        <Space wrap>
          \u586B\u5145\u6A21\u5F0F\uFF1A\uFF08\u9ED8\u8BA4\uFF1APkcs7\uFF09
          <Radio.Group
            options={[
              { label: 'Pkcs7', value: 'Pkcs7' },
              { label: 'AnsiX923', value: 'AnsiX923' },
              { label: 'Iso10126', value: 'Iso10126' },
              { label: 'Iso97971', value: 'Iso97971' },
              { label: 'NoPadding', value: 'NoPadding' },
              { label: 'ZeroPadding', value: 'ZeroPadding' }
            ]}
            onChange={({ target: { value } }) => setPadding(value)}
            value={padding}
            optionType='button'
            buttonStyle='solid'
          />
        </Space>
      </Space>
      <Space wrap>
        <Input.TextArea
          rows={5}
          style={{ width: '300px' }}
          value={toString(encryptValue)}
          onChange={({ target: { value } }) => setEncryptValue(value)}
        />
        <Space direction='vertical'>
          <Button type='primary' onClick={onEncrypt} icon={<RightOutlined />}>
            \u52A0\u5BC6
          </Button>
          <Button type='primary' onClick={onDecrypt} icon={<LeftOutlined />}>
            \u89E3\u5BC6
          </Button>
        </Space>
        <Input.TextArea
          rows={5}
          style={{ width: '300px' }}
          value={toString(decryptValue)}
          onChange={({ target: { value } }) => setDecryptValue(value)}
        />
      </Space>
    </Space>
  );
};

export default AES;
`},91023:function(L,w){"use strict";w.Z=`import { LeftOutlined, RightOutlined } from '@ant-design/icons';
import { cryptoBase64 } from '@zpcscc/thirdparty';
import { toString } from '@zpcscc/utils';
import { Button, Input, Space } from 'antd';
import { useState, type FC } from 'react';

const Base64: FC = () => {
  // \u5F85\u52A0\u5BC6\u6570\u636E
  const [encryptValue, setEncryptValue] = useState<string>('');
  // \u5F85\u89E3\u5BC6\u6570\u636E
  const [decryptValue, setDecryptValue] = useState<string>('');
  // \u52A0\u5BC6
  const onEncrypt = () => {
    setDecryptValue(cryptoBase64.encrypt(encryptValue));
  };
  // \u89E3\u5BC6
  const onDecrypt = () => {
    setEncryptValue(cryptoBase64.decrypt(decryptValue));
  };

  return (
    <Space wrap>
      <Input.TextArea
        rows={5}
        style={{ width: '300px' }}
        value={toString(encryptValue)}
        onChange={(e) => setEncryptValue(e.target.value)}
      />
      <Space direction='vertical'>
        <Button type='primary' onClick={onEncrypt} icon={<RightOutlined />}>
          \u52A0\u5BC6
        </Button>
        <Button type='primary' onClick={onDecrypt} icon={<LeftOutlined />}>
          \u89E3\u5BC6
        </Button>
      </Space>
      <Input.TextArea
        rows={5}
        style={{ width: '300px' }}
        value={toString(decryptValue)}
        onChange={(e) => setDecryptValue(e.target.value)}
      />
    </Space>
  );
};

export default Base64;
`},44676:function(L,w){"use strict";w.Z=`import { toSvg } from '@zpcscc/thirdparty';
import { Button, Image, Space } from 'antd';
import { useState, type FC } from 'react';

// \u622A\u5C4F
const App: FC = () => {
  const [imgSrc, setImgSrc] = useState<string>('https://zpcscc.top/img/logo.png');

  // \u622A\u5C4F
  const onScreenshot = async () => {
    const url = await toSvg(document.body, {
      pixelRatio: 2,
      skipFonts: true,
      drawImageInterval: 0
    });
    setImgSrc(url);
  };

  return (
    <Space direction='vertical' align='center'>
      <Image width={400} height={300} src={imgSrc} />
      <Button type='primary' onClick={onScreenshot}>
        \u622A\u53D6\u5168\u5C4F
      </Button>
    </Space>
  );
};

export default App;
`},7128:function(L,w){"use strict";w.Z=`import { ScreenShot } from '@zpcscc/thirdparty';
import { Button, Flex, Image, Radio, Space, type RadioChangeEvent } from 'antd';
import { useState, type FC } from 'react';

// \u81EA\u7531\u622A\u5C4F\u5DE5\u5177
const App: FC = () => {
  const [imgSrc, setImgSrc] = useState<string>('https://zpcscc.top/img/logo.png');
  const [enableWebRtc, setEnableWebRtc] = useState<boolean>(false);

  // \u622A\u5C4F
  const onScreenshot = () => {
    // eslint-disable-next-line no-new
    new ScreenShot({
      enableWebRtc,
      ratio: 2,
      completeCallback: ({ base64 }) => setImgSrc(base64)
    });
  };

  const onChange = (e: RadioChangeEvent) => {
    const value = e.target.value;
    setEnableWebRtc(value === 'WebRtc');
  };

  return (
    <Space direction='vertical' align='center'>
      <Image width={400} height={300} src={imgSrc} />
      <Flex gap='middle' align='center' justify='center'>
        \u622A\u5C4F\u6A21\u5F0F
        <Radio.Group onChange={onChange} defaultValue='html-to-image'>
          <Radio.Button value='WebRtc'>WebRtc</Radio.Button>
          <Radio.Button value='html-to-image'>html-to-image</Radio.Button>
        </Radio.Group>
      </Flex>
      <Button type='primary' onClick={onScreenshot}>
        \u5F00\u59CB\u622A\u5C4F
      </Button>
    </Space>
  );
};

export default App;
`},96581:function(){}}]);
